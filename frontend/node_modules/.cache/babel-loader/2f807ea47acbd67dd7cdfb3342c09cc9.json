{"remainingRequest":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gatekeeper\\frontend\\src\\components\\ServiceManager.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\gatekeeper\\frontend\\src\\components\\ServiceManager.vue","mtime":1752645802056},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1747724958365},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1747724959585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdTZXJ2aWNlTWFuYWdlcicsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFkZEZvcm06IHsKICAgICAgICB1cmw6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBpc19wdWJsaWM6IGZhbHNlCiAgICAgIH0sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIHVybDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpemhtemdouWcsOWdgCcsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9LCB7CiAgICAgICAgICB0eXBlOiAnc3RyaW5nJywKICAgICAgICAgIHBhdHRlcm46IC9eKGh0dHBzPzpcL1wvKT8oW1xkYS16Li1dKylcLihbYS16Ll17Miw2fSkoWy9cdyAuLV0qKSpcLz8kLywKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmnInmlYjnmoRVUkzlnLDlnYAnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgaWZyYW1lczogW10sCiAgICAgIHNlbGVjdGVkSWR4OiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZXJyb3I6IG51bGwsCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBhZGREaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgZGVsZXRlQ29uZmlybVZpc2libGU6IGZhbHNlLAogICAgICBkZWxldGVMb2FkaW5nOiBmYWxzZSwKICAgICAgaW5kZXhUb0RlbGV0ZTogbnVsbCwKICAgICAgLy8g5p2D6ZmQ566h55CG55u45YWzCiAgICAgIHBlcm1pc3Npb25EaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgcGVybWlzc2lvbkxvYWRpbmc6IGZhbHNlLAogICAgICBzZWxlY3RlZFNlcnZpY2U6IG51bGwsCiAgICAgIHBlcm1pc3Npb25Gb3JtOiB7CiAgICAgICAgaXNfcHVibGljOiBmYWxzZSwKICAgICAgICBwZXJtaXNzaW9uczogW10KICAgICAgfSwKICAgICAgLy8g5re75Yqg55So5oi35p2D6ZmQCiAgICAgIGFkZFVzZXJQZXJtaXNzaW9uRGlhbG9nVmlzaWJsZTogZmFsc2UsCiAgICAgIG5ld1VzZXJQZXJtaXNzaW9uOiB7CiAgICAgICAgdXNlcl9pZDogbnVsbCwKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgY2FuX3ZpZXc6IHRydWUsCiAgICAgICAgY2FuX2VkaXQ6IGZhbHNlLAogICAgICAgIGNhbl9kZWxldGU6IGZhbHNlCiAgICAgIH0sCiAgICAgIGF2YWlsYWJsZVVzZXJzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIgfHwge307CiAgICB9LAogICAgaXNBZG1pbigpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci5pc19hZG1pbjsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRTZXJ2aWNlcygpOwogIH0sCiAgbWV0aG9kczogewogICAgLy8g5pi+56S65re75Yqg5a+56K+d5qGGCiAgICBzaG93QWRkRGlhbG9nKCkgewogICAgICB0aGlzLmFkZERpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgICAvLyDlu7bov5/ogZrnhKbliLBVUkzovpPlhaXmoYYKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGNvbnN0IGlucHV0RWwgPSB0aGlzLiRyZWZzLmFkZEZvcm0ucXVlcnlTZWxlY3RvcignaW5wdXQnKTsKICAgICAgICBpZiAoaW5wdXRFbCkgewogICAgICAgICAgaW5wdXRFbC5mb2N1cygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgLy8g6YeN572u6KGo5Y2VCiAgICByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuYWRkRm9ybSA9IHsKICAgICAgICB1cmw6ICcnLAogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBpc19wdWJsaWM6IGZhbHNlCiAgICAgIH07CiAgICAgIGlmICh0aGlzLiRyZWZzLmFkZEZvcm0pIHsKICAgICAgICB0aGlzLiRyZWZzLmFkZEZvcm0ucmVzZXRGaWVsZHMoKTsKICAgICAgfQogICAgfSwKICAgIC8vIOWKoOi9veacjeWKoeWIl+ihqAogICAgYXN5bmMgbG9hZFNlcnZpY2VzKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvc2VydmljZXMnKTsKICAgICAgICB0aGlzLmlmcmFtZXMgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgPyBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIDogJ+WKoOi9veacjeWKoeWksei0pSc7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLmVycm9yKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOa3u+WKoOacjeWKoQogICAgYXN5bmMgYWRkSWZyYW1lKCkgewogICAgICAvLyDooajljZXpqozor4EKICAgICAgdGhpcy4kcmVmcy5hZGRGb3JtLnZhbGlkYXRlKGFzeW5jIHZhbGlkID0+IHsKICAgICAgICBpZiAoIXZhbGlkKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwoKICAgICAgICAgIC8vIOWmguaenFVSTOS4jeWMheWQq2h0dHDmiJZodHRwc++8jOa3u+WKoGh0dHA6Ly/liY3nvIAKICAgICAgICAgIGxldCB1cmwgPSB0aGlzLmFkZEZvcm0udXJsLnRyaW0oKTsKICAgICAgICAgIGlmICghL15odHRwcz86XC9cLy9pLnRlc3QodXJsKSkgewogICAgICAgICAgICB1cmwgPSAnaHR0cDovLycgKyB1cmw7CiAgICAgICAgICB9CiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoJy9hcGkvc2VydmljZXMnLCB7CiAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICB0aXRsZTogdGhpcy5hZGRGb3JtLnRpdGxlLnRyaW0oKSwKICAgICAgICAgICAgaXNfcHVibGljOiB0aGlzLmFkZEZvcm0uaXNfcHVibGljCiAgICAgICAgICB9KTsKICAgICAgICAgIHRoaXMuaWZyYW1lcy5wdXNoKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmt7vliqDmiJDlip8nKTsKICAgICAgICAgIHRoaXMuYWRkRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgPyBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIDogJ+a3u+WKoOacjeWKoeWksei0pSc7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuZXJyb3IpOwogICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyDlpITnkIbljaHniYfoj5zljZXlkb3ku6QKICAgIGhhbmRsZUNvbW1hbmQoY29tbWFuZCwgaWR4KSB7CiAgICAgIGlmIChjb21tYW5kID09PSAndmlldycpIHsKICAgICAgICB0aGlzLnNlbGVjdElmcmFtZShpZHgpOwogICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09ICdkZWxldGUnKSB7CiAgICAgICAgdGhpcy5pbmRleFRvRGVsZXRlID0gaWR4OwogICAgICAgIHRoaXMuZGVsZXRlQ29uZmlybVZpc2libGUgPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKGNvbW1hbmQgPT09ICdzaGFyZScpIHsKICAgICAgICB0aGlzLnNob3dQZXJtaXNzaW9uRGlhbG9nKGlkeCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDnoa7orqTliKDpmaQKICAgIGFzeW5jIGNvbmZpcm1EZWxldGUoKSB7CiAgICAgIGlmICh0aGlzLmluZGV4VG9EZWxldGUgPT09IG51bGwpIHJldHVybjsKICAgICAgdGhpcy5kZWxldGVMb2FkaW5nID0gdHJ1ZTsKICAgICAgYXdhaXQgdGhpcy5yZW1vdmVJZnJhbWUodGhpcy5pbmRleFRvRGVsZXRlKTsKICAgICAgdGhpcy5kZWxldGVMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZGVsZXRlQ29uZmlybVZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5pbmRleFRvRGVsZXRlID0gbnVsbDsKICAgIH0sCiAgICAvLyDliKDpmaTmnI3liqEKICAgIGFzeW5jIHJlbW92ZUlmcmFtZShpZHhUb1JlbW92ZSkgewogICAgICBjb25zdCBzZXJ2aWNlVG9SZW1vdmUgPSB0aGlzLmlmcmFtZXNbaWR4VG9SZW1vdmVdOwoKICAgICAgLy8g5aaC5p6c5rKh5pyJSUTvvIzor7TmmI7mmK/mnKzlnLDmt7vliqDnmoTmnKrkv53lrZjnmoTmnI3liqEKICAgICAgaWYgKCFzZXJ2aWNlVG9SZW1vdmUuaWQpIHsKICAgICAgICB0aGlzLmlmcmFtZXMuc3BsaWNlKGlkeFRvUmVtb3ZlLCAxKTsKICAgICAgICBpZiAodGhpcy5zZWxlY3RlZElkeCA9PT0gaWR4VG9SZW1vdmUpIHsKICAgICAgICAgIHRoaXMuY2xvc2VJZnJhbWVDb250ZW50KCk7CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdGVkSWR4ID4gaWR4VG9SZW1vdmUpIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRJZHgtLTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfliKDpmaTmiJDlip8nKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdHJ5IHsKICAgICAgICAvLyDorr7nva7liKDpmaTkuK3nirbmgIEKICAgICAgICB0aGlzLiRzZXQodGhpcy5pZnJhbWVzW2lkeFRvUmVtb3ZlXSwgJ2RlbGV0aW5nJywgdHJ1ZSk7CiAgICAgICAgYXdhaXQgYXhpb3MuZGVsZXRlKGAvYXBpL3NlcnZpY2VzLyR7c2VydmljZVRvUmVtb3ZlLmlkfWApOwogICAgICAgIHRoaXMuaWZyYW1lcy5zcGxpY2UoaWR4VG9SZW1vdmUsIDEpOwogICAgICAgIGlmICh0aGlzLnNlbGVjdGVkSWR4ID09PSBpZHhUb1JlbW92ZSkgewogICAgICAgICAgdGhpcy5jbG9zZUlmcmFtZUNvbnRlbnQoKTsKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2VsZWN0ZWRJZHggPiBpZHhUb1JlbW92ZSkgewogICAgICAgICAgdGhpcy5zZWxlY3RlZElkeC0tOwogICAgICAgIH0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+WIoOmZpOaIkOWKnycpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgPyBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIDogJ+WIoOmZpOacjeWKoeWksei0pSc7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih0aGlzLmVycm9yKTsKICAgICAgICAvLyDlj5bmtojliKDpmaTkuK3nirbmgIEKICAgICAgICBpZiAodGhpcy5pZnJhbWVzW2lkeFRvUmVtb3ZlXSkgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMuaWZyYW1lc1tpZHhUb1JlbW92ZV0sICdkZWxldGluZycsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBzZWxlY3RJZnJhbWUoaWR4KSB7CiAgICAgIHRoaXMuc2VsZWN0ZWRJZHggPSBpZHg7CiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgY2xvc2VJZnJhbWVDb250ZW50KCkgewogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5zZWxlY3RlZElkeCA9IG51bGw7CiAgICB9LAogICAgLy8g5qC85byP5YyWVVJM5pi+56S6CiAgICBmb3JtYXRVcmwodXJsKSB7CiAgICAgIGlmICghdXJsKSByZXR1cm4gJyc7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgdXJsT2JqID0gbmV3IFVSTCh1cmwpOwogICAgICAgIHJldHVybiB1cmxPYmouaG9zdG5hbWU7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICByZXR1cm4gdXJsOwogICAgICB9CiAgICB9LAogICAgLy8g5qC85byP5YyW5pel5pyf5pi+56S6CiAgICBmb3JtYXREYXRlKGRhdGVTdHIpIHsKICAgICAgaWYgKCFkYXRlU3RyKSByZXR1cm4gJyc7CiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyKTsKICAgICAgcmV0dXJuIGRhdGUudG9Mb2NhbGVTdHJpbmcoJ3poLUNOJywgewogICAgICAgIHllYXI6ICdudW1lcmljJywKICAgICAgICBtb250aDogJzItZGlnaXQnLAogICAgICAgIGRheTogJzItZGlnaXQnLAogICAgICAgIGhvdXI6ICcyLWRpZ2l0JywKICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmnYPpmZDnm7jlhbPmlrnms5UKCiAgICAvLyDliKTmlq3lvZPliY3nlKjmiLfmmK/lkKblj6/ku6XliKDpmaTmnI3liqEKICAgIGNhbkRlbGV0ZShzZXJ2aWNlKSB7CiAgICAgIGlmICghc2VydmljZSkgcmV0dXJuIGZhbHNlOwogICAgICByZXR1cm4gdGhpcy5pc0FkbWluIHx8IHNlcnZpY2UudXNlcl9pZCA9PT0gdGhpcy5jdXJyZW50VXNlci5pZDsKICAgIH0sCiAgICAvLyDliKTmlq3lvZPliY3nlKjmiLfmmK/lkKblj6/ku6XnrqHnkIbmnYPpmZAKICAgIGNhbk1hbmFnZVBlcm1pc3Npb25zKHNlcnZpY2UpIHsKICAgICAgaWYgKCFzZXJ2aWNlKSByZXR1cm4gZmFsc2U7CiAgICAgIHJldHVybiB0aGlzLmlzQWRtaW4gfHwgc2VydmljZS51c2VyX2lkID09PSB0aGlzLmN1cnJlbnRVc2VyLmlkOwogICAgfSwKICAgIC8vIOaYvuekuuadg+mZkOiuvue9ruWvueivneahhgogICAgYXN5bmMgc2hvd1Blcm1pc3Npb25EaWFsb2coaWR4KSB7CiAgICAgIGlmIChpZHggPT09IG51bGwgfHwgIXRoaXMuaWZyYW1lc1tpZHhdKSByZXR1cm47CiAgICAgIHRoaXMuc2VsZWN0ZWRTZXJ2aWNlID0gdGhpcy5pZnJhbWVzW2lkeF07CiAgICAgIHRoaXMucGVybWlzc2lvbkxvYWRpbmcgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIC8vIOiOt+WPluacjeWKoeadg+mZkOiuvue9rgogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL3NlcnZpY2VzLyR7dGhpcy5zZWxlY3RlZFNlcnZpY2UuaWR9L3Blcm1pc3Npb25zYCk7CiAgICAgICAgdGhpcy5wZXJtaXNzaW9uRm9ybSA9IHsKICAgICAgICAgIGlzX3B1YmxpYzogcmVzcG9uc2UuZGF0YS5pc19wdWJsaWMsCiAgICAgICAgICBwZXJtaXNzaW9uczogcmVzcG9uc2UuZGF0YS5wZXJtaXNzaW9ucyB8fCBbXQogICAgICAgIH07CgogICAgICAgIC8vIOiOt+WPluWPr+eUqOeUqOaIt+WIl+ihqAogICAgICAgIGF3YWl0IHRoaXMubG9hZEF2YWlsYWJsZVVzZXJzKCk7CiAgICAgICAgdGhpcy5wZXJtaXNzaW9uRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciA/IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgOiAn6I635Y+W5p2D6ZmQ6K6+572u5aSx6LSlJzsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuZXJyb3IpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMucGVybWlzc2lvbkxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIC8vIOWKoOi9veWPr+eUqOeUqOaIt+WIl+ihqAogICAgYXN5bmMgbG9hZEF2YWlsYWJsZVVzZXJzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3VzZXJzJyk7CiAgICAgICAgLy8g6L+H5ruk5o6J5b2T5YmN55So5oi35ZKM5bey5pyJ5p2D6ZmQ55qE55So5oi3CiAgICAgICAgdGhpcy5hdmFpbGFibGVVc2VycyA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKHVzZXIgPT4gdXNlci5pZCAhPT0gdGhpcy5jdXJyZW50VXNlci5pZCAmJiAhdGhpcy5wZXJtaXNzaW9uRm9ybS5wZXJtaXNzaW9ucy5zb21lKHAgPT4gcC51c2VyX2lkID09PSB1c2VyLmlkKSk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W55So5oi35YiX6KGo5aSx6LSlJyk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmmL7npLrmt7vliqDnlKjmiLfmnYPpmZDlr7nor53moYYKICAgIHNob3dBZGRVc2VyUGVybWlzc2lvbigpIHsKICAgICAgLy8g6YeN572u6KGo5Y2VCiAgICAgIHRoaXMubmV3VXNlclBlcm1pc3Npb24gPSB7CiAgICAgICAgdXNlcl9pZDogbnVsbCwKICAgICAgICBjYW5fdmlldzogdHJ1ZSwKICAgICAgICBjYW5fZWRpdDogZmFsc2UsCiAgICAgICAgY2FuX2RlbGV0ZTogZmFsc2UKICAgICAgfTsKCiAgICAgIC8vIOabtOaWsOWPr+eUqOeUqOaIt+WIl+ihqAogICAgICB0aGlzLmFkZFVzZXJQZXJtaXNzaW9uRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgLy8g5re75Yqg55So5oi35p2D6ZmQCiAgICBhZGRVc2VyUGVybWlzc2lvbigpIHsKICAgICAgaWYgKCF0aGlzLm5ld1VzZXJQZXJtaXNzaW9uLnVzZXJfaWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeeUqOaItycpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgLy8g5p+l5om+5a+55bqU55qE55So5oi35ZCNCiAgICAgIGNvbnN0IHNlbGVjdGVkVXNlciA9IHRoaXMuYXZhaWxhYmxlVXNlcnMuZmluZCh1ID0+IHUuaWQgPT09IHRoaXMubmV3VXNlclBlcm1pc3Npb24udXNlcl9pZCk7CiAgICAgIGlmICghc2VsZWN0ZWRVc2VyKSByZXR1cm47CgogICAgICAvLyDmt7vliqDliLDmnYPpmZDliJfooagKICAgICAgdGhpcy5wZXJtaXNzaW9uRm9ybS5wZXJtaXNzaW9ucy5wdXNoKHsKICAgICAgICB1c2VyX2lkOiB0aGlzLm5ld1VzZXJQZXJtaXNzaW9uLnVzZXJfaWQsCiAgICAgICAgdXNlcm5hbWU6IHNlbGVjdGVkVXNlci51c2VybmFtZSwKICAgICAgICBjYW5fdmlldzogdHJ1ZSwKICAgICAgICBjYW5fZWRpdDogdGhpcy5uZXdVc2VyUGVybWlzc2lvbi5jYW5fZWRpdCwKICAgICAgICBjYW5fZGVsZXRlOiB0aGlzLm5ld1VzZXJQZXJtaXNzaW9uLmNhbl9kZWxldGUKICAgICAgfSk7CgogICAgICAvLyDku47lj6/nlKjnlKjmiLfliJfooajkuK3np7vpmaQKICAgICAgdGhpcy5hdmFpbGFibGVVc2VycyA9IHRoaXMuYXZhaWxhYmxlVXNlcnMuZmlsdGVyKHUgPT4gdS5pZCAhPT0gdGhpcy5uZXdVc2VyUGVybWlzc2lvbi51c2VyX2lkKTsKICAgICAgdGhpcy5hZGRVc2VyUGVybWlzc2lvbkRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgIH0sCiAgICAvLyDnp7vpmaTnlKjmiLfmnYPpmZAKICAgIHJlbW92ZVVzZXJQZXJtaXNzaW9uKGluZGV4KSB7CiAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5wZXJtaXNzaW9uRm9ybS5wZXJtaXNzaW9ucy5sZW5ndGgpIHJldHVybjsKCiAgICAgIC8vIOWwhueUqOaIt+a3u+WKoOWbnuWPr+eUqOeUqOaIt+WIl+ihqAogICAgICBjb25zdCByZW1vdmVkUGVybWlzc2lvbiA9IHRoaXMucGVybWlzc2lvbkZvcm0ucGVybWlzc2lvbnNbaW5kZXhdOwogICAgICBjb25zdCBleGlzdGluZ1VzZXIgPSB0aGlzLmF2YWlsYWJsZVVzZXJzLmZpbmQodSA9PiB1LmlkID09PSByZW1vdmVkUGVybWlzc2lvbi51c2VyX2lkKTsKICAgICAgaWYgKCFleGlzdGluZ1VzZXIpIHsKICAgICAgICB0aGlzLmF2YWlsYWJsZVVzZXJzLnB1c2goewogICAgICAgICAgaWQ6IHJlbW92ZWRQZXJtaXNzaW9uLnVzZXJfaWQsCiAgICAgICAgICB1c2VybmFtZTogcmVtb3ZlZFBlcm1pc3Npb24udXNlcm5hbWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8g5LuO5p2D6ZmQ5YiX6KGo5Lit56e76ZmkCiAgICAgIHRoaXMucGVybWlzc2lvbkZvcm0ucGVybWlzc2lvbnMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAvLyDkv53lrZjmnYPpmZDorr7nva4KICAgIGFzeW5jIHNhdmVQZXJtaXNzaW9ucygpIHsKICAgICAgaWYgKCF0aGlzLnNlbGVjdGVkU2VydmljZSkgcmV0dXJuOwogICAgICB0aGlzLnBlcm1pc3Npb25Mb2FkaW5nID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCBheGlvcy5wb3N0KGAvYXBpL3NlcnZpY2VzLyR7dGhpcy5zZWxlY3RlZFNlcnZpY2UuaWR9L3Blcm1pc3Npb25zYCwgdGhpcy5wZXJtaXNzaW9uRm9ybSk7CgogICAgICAgIC8vIOabtOaWsOacrOWcsOaVsOaNrgogICAgICAgIGNvbnN0IHNlcnZpY2VJbmRleCA9IHRoaXMuaWZyYW1lcy5maW5kSW5kZXgocyA9PiBzLmlkID09PSB0aGlzLnNlbGVjdGVkU2VydmljZS5pZCk7CiAgICAgICAgaWYgKHNlcnZpY2VJbmRleCAhPT0gLTEpIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLmlmcmFtZXNbc2VydmljZUluZGV4XSwgJ2lzX3B1YmxpYycsIHRoaXMucGVybWlzc2lvbkZvcm0uaXNfcHVibGljKTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmnYPpmZDorr7nva7lt7Lkv53lrZgnKTsKICAgICAgICB0aGlzLnBlcm1pc3Npb25EaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy5lcnJvciA9IGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciA/IGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgOiAn5L+d5a2Y5p2D6ZmQ6K6+572u5aSx6LSlJzsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHRoaXMuZXJyb3IpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMucGVybWlzc2lvbkxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfQogIH0KfTs="},{"version":3,"names":["axios","name","data","addForm","url","title","is_public","formRules","required","message","trigger","type","pattern","iframes","selectedIdx","loading","error","dialogVisible","addDialogVisible","deleteConfirmVisible","deleteLoading","indexToDelete","permissionDialogVisible","permissionLoading","selectedService","permissionForm","permissions","addUserPermissionDialogVisible","newUserPermission","user_id","username","can_view","can_edit","can_delete","availableUsers","computed","currentUser","$store","state","user","isAdmin","is_admin","mounted","loadServices","methods","showAddDialog","$nextTick","inputEl","$refs","querySelector","focus","resetForm","resetFields","response","get","$message","addIframe","validate","valid","trim","test","post","push","success","handleCommand","command","idx","selectIframe","showPermissionDialog","confirmDelete","removeIframe","idxToRemove","serviceToRemove","id","splice","closeIframeContent","$set","delete","formatUrl","urlObj","URL","hostname","e","formatDate","dateStr","date","Date","toLocaleString","year","month","day","hour","minute","canDelete","service","canManagePermissions","loadAvailableUsers","filter","some","p","showAddUserPermission","addUserPermission","warning","selectedUser","find","u","removeUserPermission","index","length","removedPermission","existingUser","savePermissions","serviceIndex","findIndex","s"],"sources":["src/components/ServiceManager.vue"],"sourcesContent":["\n<template>\n  <div class=\"service-manager\">\n    <div class=\"page-header\">\n      <h2 class=\"page-title\">服务管理</h2>\n      <div class=\"page-description\">添加和管理外部服务页面，方便快速访问</div>\n    </div>\n\n    <!-- 工具栏 -->\n    <div class=\"actions-toolbar\">\n      <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"showAddDialog\" v-if=\"isAdmin\">添加页面</el-button>\n    </div>\n    \n    <!-- 服务列表区域 -->\n    <div class=\"section-title\">\n      <i class=\"el-icon-menu\"></i> 服务列表\n    </div>\n    \n    <!-- 卡片区 -->\n    <div class=\"card-container\">\n      <el-row :gutter=\"20\">\n        <el-col :xs=\"24\" :sm=\"12\" :md=\"8\" :xl=\"6\" v-for=\"(item, idx) in iframes\" :key=\"item.id || idx\">\n          <el-card \n            class=\"iframe-card\" \n            :class=\"{ 'is-active': selectedIdx === idx }\"\n            shadow=\"hover\" \n            @click.native=\"selectIframe(idx)\">\n            <div class=\"card-header\">\n              <div class=\"iframe-title\">{{ item.title || item.url }}</div>\n              <el-dropdown trigger=\"click\" @command=\"handleCommand($event, idx)\" class=\"card-menu\" @click.stop>\n                <span class=\"el-dropdown-link\" @click.stop>\n                  <i class=\"el-icon-more\"></i>\n                </span>\n                <el-dropdown-menu slot=\"dropdown\">\n                  <el-dropdown-item command=\"view\">\n                    <i class=\"el-icon-view\"></i> 查看\n                  </el-dropdown-item>\n                  <el-dropdown-item command=\"share\" v-if=\"canManagePermissions(item)\">\n                    <i class=\"el-icon-share\"></i> 权限设置\n                  </el-dropdown-item>\n                  <el-dropdown-item command=\"delete\" divided v-if=\"canDelete(item)\">\n                    <i class=\"el-icon-delete\"></i> 删除\n                  </el-dropdown-item>\n                </el-dropdown-menu>\n              </el-dropdown>\n            </div>\n            <div class=\"card-content\">\n              <div class=\"url-preview\">{{ formatUrl(item.url) }}</div>\n              <div class=\"card-footer\">\n                <span class=\"time-info\" v-if=\"item.created_at\">创建于 {{ formatDate(item.created_at) }}</span>\n                <el-tag size=\"mini\" type=\"success\" v-if=\"item.is_public\">公共</el-tag>\n                <el-tag size=\"mini\" type=\"info\" v-if=\"item.user_id === currentUser.id\">我的</el-tag>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n        \n        <!-- 空状态提示 -->\n        <el-col :span=\"24\" v-if=\"iframes.length === 0\">\n          <div class=\"empty-tip\">\n            <i class=\"el-icon-info\" style=\"font-size: 48px; margin-bottom: 16px;\"></i>\n            <span>暂无服务页面，点击\"添加页面\"按钮添加新的服务</span>\n          </div>\n        </el-col>\n      </el-row>\n    </div>\n\n    <!-- 添加服务对话框 -->\n    <el-dialog title=\"添加服务页面\" :visible.sync=\"addDialogVisible\" width=\"30%\" @closed=\"resetForm\">\n      <el-form :model=\"addForm\" :rules=\"formRules\" ref=\"addForm\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"addForm.title\" placeholder=\"请输入服务标题\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"地址\" prop=\"url\">\n          <el-input v-model=\"addForm.url\" placeholder=\"请输入服务地址，例如: http://example.com\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"公共页面\">\n          <el-switch v-model=\"addForm.is_public\"></el-switch>\n          <div class=\"form-tip\">开启后，所有用户都可以访问此服务页面</div>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addIframe\" :loading=\"loading\">确定</el-button>\n      </div>\n    </el-dialog>\n\n    <!-- 服务内容对话框 -->\n    <el-dialog \n      :title=\"(iframes[selectedIdx] && iframes[selectedIdx].title) || (iframes[selectedIdx] && iframes[selectedIdx].url)\" \n      :visible.sync=\"dialogVisible\" \n      width=\"90%\" \n      :before-close=\"closeIframeContent\"\n      class=\"iframe-dialog\"\n      fullscreen>\n      <iframe v-if=\"selectedIdx !== null && iframes[selectedIdx]\" :src=\"iframes[selectedIdx].url\" class=\"iframe-content\"></iframe>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"closeIframeContent\">关闭</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 删除确认对话框 -->\n    <el-dialog\n      title=\"确认删除\"\n      :visible.sync=\"deleteConfirmVisible\"\n      width=\"30%\">\n      <span>确定要删除此服务页面吗？</span>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"deleteConfirmVisible = false\">取消</el-button>\n        <el-button type=\"danger\" @click=\"confirmDelete\" :loading=\"deleteLoading\">删除</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 权限设置对话框 -->\n    <el-dialog\n      title=\"权限设置\"\n      :visible.sync=\"permissionDialogVisible\"\n      width=\"50%\">\n      <div v-if=\"selectedService\">\n        <el-form label-width=\"120px\">\n          <el-form-item label=\"公共页面\">\n            <el-switch v-model=\"permissionForm.is_public\"></el-switch>\n            <div class=\"form-tip\">开启后，所有用户都可以访问此服务页面</div>\n          </el-form-item>\n        </el-form>\n        \n        <div class=\"section-divider\">\n          <span>用户权限</span>\n        </div>\n        \n        <div class=\"user-permissions\">\n          <div class=\"user-permissions-header\">\n            <el-button size=\"small\" type=\"primary\" @click=\"showAddUserPermission\">\n              <i class=\"el-icon-plus\"></i> 添加用户\n            </el-button>\n          </div>\n          \n          <el-table :data=\"permissionForm.permissions\" style=\"width: 100%\">\n            <el-table-column prop=\"username\" label=\"用户名\"></el-table-column>\n            <el-table-column label=\"查看权限\">\n              <template slot-scope=\"scope\">\n                <el-switch v-model=\"scope.row.can_view\" disabled></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"编辑权限\">\n              <template slot-scope=\"scope\">\n                <el-switch v-model=\"scope.row.can_edit\"></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"删除权限\">\n              <template slot-scope=\"scope\">\n                <el-switch v-model=\"scope.row.can_delete\"></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"80\">\n              <template slot-scope=\"scope\">\n                <el-button \n                  size=\"mini\" \n                  type=\"danger\" \n                  icon=\"el-icon-delete\"\n                  @click=\"removeUserPermission(scope.$index)\">\n                </el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          \n          <div class=\"empty-tip\" v-if=\"permissionForm.permissions.length === 0\">\n            <span>暂无用户权限，点击\"添加用户\"按钮设置用户权限</span>\n          </div>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"permissionDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"savePermissions\" :loading=\"permissionLoading\">保存</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 添加用户权限对话框 -->\n    <el-dialog\n      title=\"添加用户权限\"\n      :visible.sync=\"addUserPermissionDialogVisible\"\n      width=\"30%\">\n      <el-form :model=\"newUserPermission\" label-width=\"80px\">\n        <el-form-item label=\"用户\">\n          <el-select v-model=\"newUserPermission.user_id\" placeholder=\"请选择用户\" style=\"width: 100%\">\n            <el-option\n              v-for=\"user in availableUsers\"\n              :key=\"user.id\"\n              :label=\"user.username\"\n              :value=\"user.id\">\n            </el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"编辑权限\">\n          <el-switch v-model=\"newUserPermission.can_edit\"></el-switch>\n        </el-form-item>\n        <el-form-item label=\"删除权限\">\n          <el-switch v-model=\"newUserPermission.can_delete\"></el-switch>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"addUserPermissionDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addUserPermission\">确定</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'ServiceManager',\n  data() {\n    return {\n      addForm: {\n        url: '',\n        title: '',\n        is_public: false\n      },\n      formRules: {\n        url: [\n          { required: true, message: '请输入页面地址', trigger: 'blur' },\n          { type: 'string', pattern: /^(https?:\\/\\/)?([\\da-z.-]+)\\.([a-z.]{2,6})([/\\w .-]*)*\\/?$/, \n            message: '请输入有效的URL地址', trigger: 'blur' }\n        ]\n      },\n      iframes: [],\n      selectedIdx: null,\n      loading: false,\n      error: null,\n      dialogVisible: false,\n      addDialogVisible: false,\n      deleteConfirmVisible: false,\n      deleteLoading: false,\n      indexToDelete: null,\n      \n      // 权限管理相关\n      permissionDialogVisible: false,\n      permissionLoading: false,\n      selectedService: null,\n      permissionForm: {\n        is_public: false,\n        permissions: []\n      },\n      \n      // 添加用户权限\n      addUserPermissionDialogVisible: false,\n      newUserPermission: {\n        user_id: null,\n        username: '',\n        can_view: true,\n        can_edit: false,\n        can_delete: false\n      },\n      availableUsers: []\n    }\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.user || {};\n    },\n    isAdmin() {\n      return this.currentUser && this.currentUser.is_admin;\n    }\n  },\n  mounted() {\n    this.loadServices();\n  },\n  methods: {\n    // 显示添加对话框\n    showAddDialog() {\n      this.addDialogVisible = true;\n      // 延迟聚焦到URL输入框\n      this.$nextTick(() => {\n        const inputEl = this.$refs.addForm.querySelector('input');\n        if (inputEl) {\n          inputEl.focus();\n        }\n      });\n    },\n    \n    // 重置表单\n    resetForm() {\n      this.addForm = {\n        url: '',\n        title: '',\n        is_public: false\n      };\n      if (this.$refs.addForm) {\n        this.$refs.addForm.resetFields();\n      }\n    },\n    \n    // 加载服务列表\n    async loadServices() {\n      try {\n        this.loading = true;\n        const response = await axios.get('/api/services');\n        this.iframes = response.data;\n        this.loading = false;\n      } catch (error) {\n        this.error = error.response && error.response.data && error.response.data.error ? error.response.data.error : '加载服务失败';\n        this.$message.error(this.error);\n        this.loading = false;\n      }\n    },\n    \n    // 添加服务\n    async addIframe() {\n      // 表单验证\n      this.$refs.addForm.validate(async (valid) => {\n        if (!valid) {\n          return false;\n        }\n        \n        try {\n          this.loading = true;\n          \n          // 如果URL不包含http或https，添加http://前缀\n          let url = this.addForm.url.trim();\n          if (!/^https?:\\/\\//i.test(url)) {\n            url = 'http://' + url;\n          }\n          \n          const response = await axios.post('/api/services', {\n            url: url,\n            title: this.addForm.title.trim(),\n            is_public: this.addForm.is_public\n          });\n          \n          this.iframes.push(response.data);\n          this.$message.success('添加成功');\n          this.addDialogVisible = false;\n          this.loading = false;\n        } catch (error) {\n          this.error = error.response && error.response.data && error.response.data.error ? error.response.data.error : '添加服务失败';\n          this.$message.error(this.error);\n          this.loading = false;\n        }\n      });\n    },\n    \n    // 处理卡片菜单命令\n    handleCommand(command, idx) {\n      if (command === 'view') {\n        this.selectIframe(idx);\n      } else if (command === 'delete') {\n        this.indexToDelete = idx;\n        this.deleteConfirmVisible = true;\n      } else if (command === 'share') {\n        this.showPermissionDialog(idx);\n      }\n    },\n    \n    // 确认删除\n    async confirmDelete() {\n      if (this.indexToDelete === null) return;\n      \n      this.deleteLoading = true;\n      await this.removeIframe(this.indexToDelete);\n      this.deleteLoading = false;\n      this.deleteConfirmVisible = false;\n      this.indexToDelete = null;\n    },\n    \n    // 删除服务\n    async removeIframe(idxToRemove) {\n      const serviceToRemove = this.iframes[idxToRemove];\n      \n      // 如果没有ID，说明是本地添加的未保存的服务\n      if (!serviceToRemove.id) {\n        this.iframes.splice(idxToRemove, 1);\n        if (this.selectedIdx === idxToRemove) {\n          this.closeIframeContent();\n        } else if (this.selectedIdx > idxToRemove) {\n          this.selectedIdx--;\n        }\n        this.$message.success('删除成功');\n        return;\n      }\n      \n      try {\n        // 设置删除中状态\n        this.$set(this.iframes[idxToRemove], 'deleting', true);\n        \n        await axios.delete(`/api/services/${serviceToRemove.id}`);\n        \n        this.iframes.splice(idxToRemove, 1);\n        if (this.selectedIdx === idxToRemove) {\n          this.closeIframeContent();\n        } else if (this.selectedIdx > idxToRemove) {\n          this.selectedIdx--;\n        }\n        this.$message.success('删除成功');\n      } catch (error) {\n        this.error = error.response && error.response.data && error.response.data.error ? error.response.data.error : '删除服务失败';\n        this.$message.error(this.error);\n        // 取消删除中状态\n        if (this.iframes[idxToRemove]) {\n          this.$set(this.iframes[idxToRemove], 'deleting', false);\n        }\n      }\n    },\n    \n    selectIframe(idx) {\n      this.selectedIdx = idx;\n      this.dialogVisible = true;\n    },\n    \n    closeIframeContent() {\n      this.dialogVisible = false;\n      this.selectedIdx = null;\n    },\n    \n    // 格式化URL显示\n    formatUrl(url) {\n      if (!url) return '';\n      try {\n        const urlObj = new URL(url);\n        return urlObj.hostname;\n      } catch (e) {\n        return url;\n      }\n    },\n    \n    // 格式化日期显示\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return date.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit'\n      });\n    },\n    \n    // 权限相关方法\n    \n    // 判断当前用户是否可以删除服务\n    canDelete(service) {\n      if (!service) return false;\n      return this.isAdmin || service.user_id === this.currentUser.id;\n    },\n    \n    // 判断当前用户是否可以管理权限\n    canManagePermissions(service) {\n      if (!service) return false;\n      return this.isAdmin || service.user_id === this.currentUser.id;\n    },\n    \n    // 显示权限设置对话框\n    async showPermissionDialog(idx) {\n      if (idx === null || !this.iframes[idx]) return;\n      \n      this.selectedService = this.iframes[idx];\n      this.permissionLoading = true;\n      \n      try {\n        // 获取服务权限设置\n        const response = await axios.get(`/api/services/${this.selectedService.id}/permissions`);\n        \n        this.permissionForm = {\n          is_public: response.data.is_public,\n          permissions: response.data.permissions || []\n        };\n        \n        // 获取可用用户列表\n        await this.loadAvailableUsers();\n        \n        this.permissionDialogVisible = true;\n      } catch (error) {\n        this.error = error.response && error.response.data && error.response.data.error ? error.response.data.error : '获取权限设置失败';\n        this.$message.error(this.error);\n      } finally {\n        this.permissionLoading = false;\n      }\n    },\n    \n    // 加载可用用户列表\n    async loadAvailableUsers() {\n      try {\n        const response = await axios.get('/api/users');\n        // 过滤掉当前用户和已有权限的用户\n        this.availableUsers = response.data.filter(user => \n          user.id !== this.currentUser.id && \n          !this.permissionForm.permissions.some(p => p.user_id === user.id)\n        );\n      } catch (error) {\n        this.$message.error('获取用户列表失败');\n      }\n    },\n    \n    // 显示添加用户权限对话框\n    showAddUserPermission() {\n      // 重置表单\n      this.newUserPermission = {\n        user_id: null,\n        can_view: true,\n        can_edit: false,\n        can_delete: false\n      };\n      \n      // 更新可用用户列表\n      this.addUserPermissionDialogVisible = true;\n    },\n    \n    // 添加用户权限\n    addUserPermission() {\n      if (!this.newUserPermission.user_id) {\n        this.$message.warning('请选择用户');\n        return;\n      }\n      \n      // 查找对应的用户名\n      const selectedUser = this.availableUsers.find(u => u.id === this.newUserPermission.user_id);\n      if (!selectedUser) return;\n      \n      // 添加到权限列表\n      this.permissionForm.permissions.push({\n        user_id: this.newUserPermission.user_id,\n        username: selectedUser.username,\n        can_view: true,\n        can_edit: this.newUserPermission.can_edit,\n        can_delete: this.newUserPermission.can_delete\n      });\n      \n      // 从可用用户列表中移除\n      this.availableUsers = this.availableUsers.filter(u => u.id !== this.newUserPermission.user_id);\n      \n      this.addUserPermissionDialogVisible = false;\n    },\n    \n    // 移除用户权限\n    removeUserPermission(index) {\n      if (index < 0 || index >= this.permissionForm.permissions.length) return;\n      \n      // 将用户添加回可用用户列表\n      const removedPermission = this.permissionForm.permissions[index];\n      const existingUser = this.availableUsers.find(u => u.id === removedPermission.user_id);\n      \n      if (!existingUser) {\n        this.availableUsers.push({\n          id: removedPermission.user_id,\n          username: removedPermission.username\n        });\n      }\n      \n      // 从权限列表中移除\n      this.permissionForm.permissions.splice(index, 1);\n    },\n    \n    // 保存权限设置\n    async savePermissions() {\n      if (!this.selectedService) return;\n      \n      this.permissionLoading = true;\n      \n      try {\n        await axios.post(`/api/services/${this.selectedService.id}/permissions`, this.permissionForm);\n        \n        // 更新本地数据\n        const serviceIndex = this.iframes.findIndex(s => s.id === this.selectedService.id);\n        if (serviceIndex !== -1) {\n          this.$set(this.iframes[serviceIndex], 'is_public', this.permissionForm.is_public);\n        }\n        \n        this.$message.success('权限设置已保存');\n        this.permissionDialogVisible = false;\n      } catch (error) {\n        this.error = error.response && error.response.data && error.response.data.error ? error.response.data.error : '保存权限设置失败';\n        this.$message.error(this.error);\n      } finally {\n        this.permissionLoading = false;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.service-manager {\n  padding: 20px;\n}\n\n.page-header {\n  margin-bottom: 24px;\n}\n\n.page-title {\n  font-size: 24px;\n  color: #303133;\n  margin: 0 0 8px 0;\n  font-weight: 500;\n}\n\n.page-description {\n  color: #606266;\n  font-size: 14px;\n}\n\n.actions-toolbar {\n  display: flex;\n  justify-content: flex-start;\n  margin-bottom: 20px;\n}\n\n.section-title {\n  margin: 25px 0 15px 0;\n  font-size: 16px;\n  font-weight: 500;\n  color: #5B6B8B;\n  display: flex;\n  align-items: center;\n}\n\n.section-title i {\n  margin-right: 8px;\n  font-size: 18px;\n}\n\n.card-container {\n  margin-bottom: 20px;\n  min-height: 120px;\n}\n\n.iframe-card {\n  margin-bottom: 15px;\n  cursor: pointer;\n  transition: all 0.3s;\n  border-radius: 8px;\n  overflow: hidden;\n  height: 150px;\n  display: flex;\n  flex-direction: column;\n}\n\n.iframe-card.is-active {\n  border: 2px solid #4B7BE5;\n  transform: translateY(-2px);\n}\n\n.iframe-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 12px 15px;\n  background: linear-gradient(to right, #4B7BE5, #5B8FF9);\n  color: white;\n}\n\n.iframe-title {\n  flex: 1;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-weight: 500;\n  font-size: 14px;\n}\n\n.card-menu {\n  color: white;\n}\n\n.el-dropdown-link {\n  cursor: pointer;\n  font-size: 16px;\n}\n\n.card-content {\n  padding: 15px;\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.url-preview {\n  color: #909399;\n  font-size: 13px;\n  margin-bottom: 10px;\n}\n\n.card-footer {\n  margin-top: auto;\n  font-size: 12px;\n  color: #909399;\n  display: flex;\n  justify-content: space-between;\n}\n\n.empty-tip {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  color: #909399;\n  height: 200px;\n  background-color: #fff;\n  border-radius: 8px;\n  box-shadow: 0 2px 12px 0 rgba(0,0,0,0.05);\n  padding: 20px;\n}\n\n.iframe-content {\n  width: 100%;\n  height: calc(100vh - 200px);\n  border: none;\n}\n\n.iframe-dialog .el-dialog__body {\n  padding: 0;\n}\n\n.form-tip {\n  color: #909399;\n  font-size: 12px;\n  margin-top: 4px;\n}\n\n.section-divider {\n  display: flex;\n  align-items: center;\n  margin: 24px 0;\n  color: #909399;\n  font-size: 14px;\n}\n\n.section-divider::before,\n.section-divider::after {\n  content: '';\n  flex: 1;\n  height: 1px;\n  background: #EBEEF5;\n}\n\n.section-divider::before {\n  margin-right: 12px;\n}\n\n.section-divider::after {\n  margin-left: 12px;\n}\n\n.user-permissions {\n  margin-bottom: 20px;\n}\n\n.user-permissions-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 12px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]}]}