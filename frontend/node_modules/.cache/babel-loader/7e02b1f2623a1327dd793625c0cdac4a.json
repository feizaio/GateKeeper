{"remainingRequest":"E:\\yunwei\\1.0\\2.0\\frontend\\node_modules\\babel-loader\\lib\\index.js!E:\\yunwei\\1.0\\2.0\\frontend\\src\\router\\index.js","dependencies":[{"path":"E:\\yunwei\\1.0\\2.0\\frontend\\src\\router\\index.js","mtime":1742459330676},{"path":"E:\\yunwei\\1.0\\2.0\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1740710845061},{"path":"E:\\yunwei\\1.0\\2.0\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1740710847398}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgVXNlck1hbmFnZW1lbnQgZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VyTWFuYWdlbWVudC52dWUnOwppbXBvcnQgTG9naW4gZnJvbSAnLi4vY29tcG9uZW50cy9Mb2dpbi52dWUnOwppbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0LnZ1ZSc7CmltcG9ydCBTZXJ2ZXJMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvU2VydmVyTGlzdC52dWUnOwppbXBvcnQgQ2F0ZWdvcnlNYW5hZ2VtZW50IGZyb20gJy4uL2NvbXBvbmVudHMvQ2F0ZWdvcnlNYW5hZ2VtZW50LnZ1ZSc7CmltcG9ydCBzdG9yZSBmcm9tICcuLi9zdG9yZSc7ClZ1ZS51c2UoVnVlUm91dGVyKTsKY29uc3Qgcm91dGVzID0gW3sKICBwYXRoOiAnL2xvZ2luJywKICBuYW1lOiAnTG9naW4nLAogIGNvbXBvbmVudDogTG9naW4KfSwgewogIHBhdGg6ICcvJywKICBjb21wb25lbnQ6IExheW91dCwKICBtZXRhOiB7CiAgICByZXF1aXJlc0F1dGg6IHRydWUKICB9LAogIGNoaWxkcmVuOiBbewogICAgcGF0aDogJycsCiAgICAvLyDpu5jorqTot6/nlLHmjIflkJHmnI3liqHlmajliJfooagKICAgIG5hbWU6ICdIb21lJywKICAgIGNvbXBvbmVudDogU2VydmVyTGlzdAogIH0sIHsKICAgIHBhdGg6ICd1c2VycycsCiAgICBuYW1lOiAnVXNlck1hbmFnZW1lbnQnLAogICAgY29tcG9uZW50OiBVc2VyTWFuYWdlbWVudCwKICAgIG1ldGE6IHsKICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgICByZXF1aXJlc0FkbWluOiB0cnVlCiAgICB9CiAgfSwgewogICAgcGF0aDogJ3N5c3RlbS9jYXRlZ29yaWVzJywKICAgIG5hbWU6ICdDYXRlZ29yeU1hbmFnZW1lbnQnLAogICAgY29tcG9uZW50OiBDYXRlZ29yeU1hbmFnZW1lbnQsCiAgICBtZXRhOiB7CiAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgICAgcmVxdWlyZXNBZG1pbjogdHJ1ZQogICAgfQogIH1dCn1dOwpjb25zdCByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzCn0pOwoKLy8g6Lev55Sx5a6I5Y2rCnJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSwgbmV4dCkgPT4gewogIGNvbnN0IGlzQXV0aGVudGljYXRlZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd0b2tlbicpOwogIGNvbnN0IHVzZXIgPSBzdG9yZS5zdGF0ZS51c2VyOwogIGNvbnN0IGlzQWRtaW4gPSB1c2VyICYmIHVzZXIuaXNfYWRtaW47CiAgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoKSkgewogICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgbmV4dCgnL2xvZ2luJyk7CiAgICB9IGVsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEucmVxdWlyZXNBZG1pbikgJiYgIWlzQWRtaW4pIHsKICAgICAgbmV4dCgnLycpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"names":["Vue","VueRouter","UserManagement","Login","Layout","ServerList","CategoryManagement","store","use","routes","path","name","component","meta","requiresAuth","children","requiresAdmin","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","isAuthenticated","localStorage","getItem","user","state","isAdmin","is_admin","matched","some","record"],"sources":["E:/yunwei/1.0/2.0/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\r\nimport VueRouter from 'vue-router'\r\nimport UserManagement from '../components/UserManagement.vue'\r\nimport Login from '../components/Login.vue'\r\nimport Layout from '../components/Layout.vue'\r\nimport ServerList from '../components/ServerList.vue'\r\nimport CategoryManagement from '../components/CategoryManagement.vue'\r\nimport store from '../store'\r\n\r\nVue.use(VueRouter)\r\n\r\nconst routes = [\r\n  {\r\n    path: '/login',\r\n    name: 'Login',\r\n    component: Login\r\n  },\r\n\r\n  {\r\n    path: '/',\r\n    component: Layout,\r\n    meta: { requiresAuth: true },\r\n    children: [\r\n      {\r\n        path: '',  // 默认路由指向服务器列表\r\n        name: 'Home',\r\n        component: ServerList\r\n      },\r\n      {\r\n        path: 'users',\r\n        name: 'UserManagement',\r\n        component: UserManagement,\r\n        meta: { requiresAuth: true, requiresAdmin: true }\r\n      },\r\n      {\r\n        path: 'system/categories',\r\n        name: 'CategoryManagement',\r\n        component: CategoryManagement,\r\n        meta: { requiresAuth: true, requiresAdmin: true }\r\n      }\r\n    ]\r\n  }\r\n]\r\n\r\nconst router = new VueRouter({\r\n  mode: 'history',\r\n  base: process.env.BASE_URL,\r\n  routes\r\n})\r\n\r\n// 路由守卫\r\nrouter.beforeEach((to, from, next) => {\r\n  const isAuthenticated = localStorage.getItem('token')\r\n  const user = store.state.user\r\n  const isAdmin = user && user.is_admin\r\n\r\n  if (to.matched.some(record => record.meta.requiresAuth)) {\r\n    if (!isAuthenticated) {\r\n      next('/login')\r\n    } else if (to.matched.some(record => record.meta.requiresAdmin) && !isAdmin) {\r\n      next('/')\r\n    } else {\r\n      next()\r\n    }\r\n  } else {\r\n    next()\r\n  }\r\n})\r\n\r\n\r\nexport default router"],"mappings":"AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,cAAc,MAAM,kCAAkC;AAC7D,OAAOC,KAAK,MAAM,yBAAyB;AAC3C,OAAOC,MAAM,MAAM,0BAA0B;AAC7C,OAAOC,UAAU,MAAM,8BAA8B;AACrD,OAAOC,kBAAkB,MAAM,sCAAsC;AACrE,OAAOC,KAAK,MAAM,UAAU;AAE5BP,GAAG,CAACQ,GAAG,CAACP,SAAS,CAAC;AAElB,MAAMQ,MAAM,GAAG,CACb;EACEC,IAAI,EAAE,QAAQ;EACdC,IAAI,EAAE,OAAO;EACbC,SAAS,EAAET;AACb,CAAC,EAED;EACEO,IAAI,EAAE,GAAG;EACTE,SAAS,EAAER,MAAM;EACjBS,IAAI,EAAE;IAAEC,YAAY,EAAE;EAAK,CAAC;EAC5BC,QAAQ,EAAE,CACR;IACEL,IAAI,EAAE,EAAE;IAAG;IACXC,IAAI,EAAE,MAAM;IACZC,SAAS,EAAEP;EACb,CAAC,EACD;IACEK,IAAI,EAAE,OAAO;IACbC,IAAI,EAAE,gBAAgB;IACtBC,SAAS,EAAEV,cAAc;IACzBW,IAAI,EAAE;MAAEC,YAAY,EAAE,IAAI;MAAEE,aAAa,EAAE;IAAK;EAClD,CAAC,EACD;IACEN,IAAI,EAAE,mBAAmB;IACzBC,IAAI,EAAE,oBAAoB;IAC1BC,SAAS,EAAEN,kBAAkB;IAC7BO,IAAI,EAAE;MAAEC,YAAY,EAAE,IAAI;MAAEE,aAAa,EAAE;IAAK;EAClD,CAAC;AAEL,CAAC,CACF;AAED,MAAMC,MAAM,GAAG,IAAIhB,SAAS,CAAC;EAC3BiB,IAAI,EAAE,SAAS;EACfC,IAAI,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC1Bb;AACF,CAAC,CAAC;;AAEF;AACAQ,MAAM,CAACM,UAAU,CAAC,CAACC,EAAE,EAAEC,IAAI,EAAEC,IAAI,KAAK;EACpC,MAAMC,eAAe,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACrD,MAAMC,IAAI,GAAGvB,KAAK,CAACwB,KAAK,CAACD,IAAI;EAC7B,MAAME,OAAO,GAAGF,IAAI,IAAIA,IAAI,CAACG,QAAQ;EAErC,IAAIT,EAAE,CAACU,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACvB,IAAI,CAACC,YAAY,CAAC,EAAE;IACvD,IAAI,CAACa,eAAe,EAAE;MACpBD,IAAI,CAAC,QAAQ,CAAC;IAChB,CAAC,MAAM,IAAIF,EAAE,CAACU,OAAO,CAACC,IAAI,CAACC,MAAM,IAAIA,MAAM,CAACvB,IAAI,CAACG,aAAa,CAAC,IAAI,CAACgB,OAAO,EAAE;MAC3EN,IAAI,CAAC,GAAG,CAAC;IACX,CAAC,MAAM;MACLA,IAAI,CAAC,CAAC;IACR;EACF,CAAC,MAAM;IACLA,IAAI,CAAC,CAAC;EACR;AACF,CAAC,CAAC;AAGF,eAAeT,MAAM","ignoreList":[]}]}