{"remainingRequest":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\gatekeeper\\frontend\\src\\router\\index.js","dependencies":[{"path":"D:\\gatekeeper\\frontend\\src\\router\\index.js","mtime":1751422775448},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1747724958365}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgVXNlck1hbmFnZW1lbnQgZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VyTWFuYWdlbWVudC52dWUnOwppbXBvcnQgTG9naW4gZnJvbSAnLi4vY29tcG9uZW50cy9Mb2dpbi52dWUnOwppbXBvcnQgTGF5b3V0IGZyb20gJy4uL2NvbXBvbmVudHMvTGF5b3V0LnZ1ZSc7CmltcG9ydCBTZXJ2ZXJMaXN0IGZyb20gJy4uL2NvbXBvbmVudHMvU2VydmVyTGlzdC52dWUnOwppbXBvcnQgQ2F0ZWdvcnlNYW5hZ2VtZW50IGZyb20gJy4uL2NvbXBvbmVudHMvQ2F0ZWdvcnlNYW5hZ2VtZW50LnZ1ZSc7CmltcG9ydCBBdWRpdExvZ3MgZnJvbSAnLi4vY29tcG9uZW50cy9BdWRpdExvZ3MudnVlJzsKaW1wb3J0IENyZWRlbnRpYWxNYW5hZ2VtZW50IGZyb20gJy4uL2NvbXBvbmVudHMvQ3JlZGVudGlhbE1hbmFnZW1lbnQudnVlJzsKaW1wb3J0IERhc2hib2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0Rhc2hib2FyZC52dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwpWdWUudXNlKFZ1ZVJvdXRlcik7CmNvbnN0IHJvdXRlcyA9IFt7CiAgcGF0aDogJy9sb2dpbicsCiAgbmFtZTogJ0xvZ2luJywKICBjb21wb25lbnQ6IExvZ2luCn0sIHsKICBwYXRoOiAnLycsCiAgY29tcG9uZW50OiBMYXlvdXQsCiAgbWV0YTogewogICAgcmVxdWlyZXNBdXRoOiB0cnVlCiAgfSwKICBjaGlsZHJlbjogW3sKICAgIHBhdGg6ICcnLAogICAgLy8g6buY6K6k6Lev55Sx5oyH5ZCR5pyN5Yqh5Zmo5YiX6KGoCiAgICBuYW1lOiAnSG9tZScsCiAgICBjb21wb25lbnQ6IFNlcnZlckxpc3QKICB9LCB7CiAgICBwYXRoOiAnZGFzaGJvYXJkJywKICAgIG5hbWU6ICdEYXNoYm9hcmQnLAogICAgY29tcG9uZW50OiBEYXNoYm9hcmQsCiAgICBtZXRhOiB7CiAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgICAgcmVxdWlyZXNBZG1pbjogdHJ1ZQogICAgfQogIH0sIHsKICAgIHBhdGg6ICd1c2VycycsCiAgICBuYW1lOiAnVXNlck1hbmFnZW1lbnQnLAogICAgY29tcG9uZW50OiBVc2VyTWFuYWdlbWVudCwKICAgIG1ldGE6IHsKICAgICAgcmVxdWlyZXNBdXRoOiB0cnVlLAogICAgICByZXF1aXJlc0FkbWluOiB0cnVlCiAgICB9CiAgfSwgewogICAgcGF0aDogJ3N5c3RlbS9jYXRlZ29yaWVzJywKICAgIG5hbWU6ICdDYXRlZ29yeU1hbmFnZW1lbnQnLAogICAgY29tcG9uZW50OiBDYXRlZ29yeU1hbmFnZW1lbnQsCiAgICBtZXRhOiB7CiAgICAgIHJlcXVpcmVzQXV0aDogdHJ1ZSwKICAgICAgcmVxdWlyZXNBZG1pbjogdHJ1ZQogICAgfQogIH0sIHsKICAgIHBhdGg6ICdzeXN0ZW0vYXVkaXQtbG9ncycsCiAgICBuYW1lOiAnQXVkaXRMb2dzJywKICAgIGNvbXBvbmVudDogQXVkaXRMb2dzLAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUsCiAgICAgIHJlcXVpcmVzQWRtaW46IHRydWUKICAgIH0KICB9LCB7CiAgICBwYXRoOiAnc3lzdGVtL2NyZWRlbnRpYWxzJywKICAgIG5hbWU6ICdDcmVkZW50aWFsTWFuYWdlbWVudCcsCiAgICBjb21wb25lbnQ6IENyZWRlbnRpYWxNYW5hZ2VtZW50LAogICAgbWV0YTogewogICAgICByZXF1aXJlc0F1dGg6IHRydWUsCiAgICAgIHJlcXVpcmVzQWRtaW46IHRydWUKICAgIH0KICB9XQp9XTsKY29uc3Qgcm91dGVyID0gbmV3IFZ1ZVJvdXRlcih7CiAgbW9kZTogJ2hpc3RvcnknLAogIGJhc2U6IHByb2Nlc3MuZW52LkJBU0VfVVJMLAogIHJvdXRlcwp9KTsKCi8vIOi3r+eUseWuiOWNqwpyb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKICBjb25zdCBpc0F1dGhlbnRpY2F0ZWQgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICBjb25zdCB1c2VyID0gc3RvcmUuc3RhdGUudXNlcjsKICBjb25zdCBpc0FkbWluID0gdXNlciAmJiB1c2VyLmlzX2FkbWluOwoKICAvLyDlpoLmnpzmmK/nmbvlvZXnirbmgIHvvIzph43nva7kuI3mtLvliqjorqHml7blmagKICBpZiAoaXNBdXRoZW50aWNhdGVkICYmIHN0b3JlLnN0YXRlLmluYWN0aXZpdHlUaW1lcikgewogICAgY2xlYXJUaW1lb3V0KHN0b3JlLnN0YXRlLmluYWN0aXZpdHlUaW1lcik7CiAgICBzdG9yZS5kaXNwYXRjaCgnc3RhcnRJbmFjdGl2aXR5VGltZXInKTsKICB9CiAgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEucmVxdWlyZXNBdXRoKSkgewogICAgaWYgKCFpc0F1dGhlbnRpY2F0ZWQpIHsKICAgICAgbmV4dCgnL2xvZ2luJyk7CiAgICB9IGVsc2UgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEucmVxdWlyZXNBZG1pbikgJiYgIWlzQWRtaW4pIHsKICAgICAgbmV4dCgnLycpOwogICAgfSBlbHNlIHsKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICBuZXh0KCk7CiAgfQp9KTsKZXhwb3J0IGRlZmF1bHQgcm91dGVyOw=="},{"version":3,"names":["Vue","VueRouter","UserManagement","Login","Layout","ServerList","CategoryManagement","AuditLogs","CredentialManagement","Dashboard","store","use","routes","path","name","component","meta","requiresAuth","children","requiresAdmin","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","isAuthenticated","localStorage","getItem","user","state","isAdmin","is_admin","inactivityTimer","clearTimeout","dispatch","matched","some","record"],"sources":["D:/gatekeeper/frontend/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport UserManagement from '../components/UserManagement.vue'\nimport Login from '../components/Login.vue'\nimport Layout from '../components/Layout.vue'\nimport ServerList from '../components/ServerList.vue'\nimport CategoryManagement from '../components/CategoryManagement.vue'\nimport AuditLogs from '../components/AuditLogs.vue'\nimport CredentialManagement from '../components/CredentialManagement.vue'\nimport Dashboard from '../components/Dashboard.vue'\nimport store from '../store'\n\nVue.use(VueRouter)\n\nconst routes = [\n  {\n    path: '/login',\n    name: 'Login',\n    component: Login\n  },\n\n  {\n    path: '/',\n    component: Layout,\n    meta: { requiresAuth: true },\n    children: [\n      {\n        path: '',  // 默认路由指向服务器列表\n        name: 'Home',\n        component: ServerList\n      },\n      {\n        path: 'dashboard',\n        name: 'Dashboard',\n        component: Dashboard,\n        meta: { requiresAuth: true, requiresAdmin: true }\n      },\n      {\n        path: 'users',\n        name: 'UserManagement',\n        component: UserManagement,\n        meta: { requiresAuth: true, requiresAdmin: true }\n      },\n      {\n        path: 'system/categories',\n        name: 'CategoryManagement',\n        component: CategoryManagement,\n        meta: { requiresAuth: true, requiresAdmin: true }\n      },\n      {\n        path: 'system/audit-logs',\n        name: 'AuditLogs',\n        component: AuditLogs,\n        meta: { requiresAuth: true, requiresAdmin: true }\n      },\n      {\n        path: 'system/credentials',\n        name: 'CredentialManagement',\n        component: CredentialManagement,\n        meta: { requiresAuth: true, requiresAdmin: true }\n      }\n    ]\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 路由守卫\nrouter.beforeEach((to, from, next) => {\n  const isAuthenticated = localStorage.getItem('token')\n  const user = store.state.user\n  const isAdmin = user && user.is_admin\n\n  // 如果是登录状态，重置不活动计时器\n  if (isAuthenticated && store.state.inactivityTimer) {\n    clearTimeout(store.state.inactivityTimer);\n    store.dispatch('startInactivityTimer');\n  }\n\n  if (to.matched.some(record => record.meta.requiresAuth)) {\n    if (!isAuthenticated) {\n      next('/login')\n    } else if (to.matched.some(record => record.meta.requiresAdmin) && !isAdmin) {\n      next('/')\n    } else {\n      next()\n    }\n  } else {\n    next()\n  }\n})\n\n\nexport default router"],"mappings":"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","ignoreList":[]}]}