{"remainingRequest":"D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gatekeeper\\frontend\\src\\components\\TaskDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\gatekeeper\\frontend\\src\\components\\TaskDetail.vue","mtime":1753233446888},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1747724958365},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1747724959585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Rhc2tEZXRhaWwnLAogIHByb3BzOiB7CiAgICBpZDogewogICAgICB0eXBlOiBbTnVtYmVyLCBTdHJpbmddLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRhc2s6IHt9LAogICAgICBhY3RpdmVUYWI6ICdkZXRhaWxzJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIAogICAgICAvLyDmiafooYzorrDlvZXnm7jlhbMKICAgICAgZXhlY3V0aW9uczogW10sCiAgICAgIGxvYWRpbmdFeGVjdXRpb25zOiBmYWxzZSwKICAgICAgCiAgICAgIC8vIOadg+mZkOebuOWFswogICAgICBwZXJtaXNzaW9uczogW10sCiAgICAgIGxvYWRpbmdQZXJtaXNzaW9uczogZmFsc2UsCiAgICAgIGlzVXBkYXRpbmdQZXJtaXNzaW9uOiBmYWxzZSwKICAgICAgcGVybWlzc2lvbkRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBwZXJtaXNzaW9uRm9ybTogewogICAgICAgIHVzZXJfaWQ6IG51bGwsCiAgICAgICAgY2FuX3ZpZXc6IHRydWUsCiAgICAgICAgY2FuX2V4ZWN1dGU6IGZhbHNlLAogICAgICAgIGNhbl90ZXJtaW5hdGU6IGZhbHNlLAogICAgICAgIGNhbl9kZWxldGU6IGZhbHNlCiAgICAgIH0sCiAgICAgIGF2YWlsYWJsZVVzZXJzOiBbXSwKICAgICAgCiAgICAgIC8vIOS7u+WKoeaJgOacieiAhQogICAgICB0YXNrT3duZXI6ICcnLAoKICAgICAgLy8g5Y+C5pWw5a+56K+d5qGG55u45YWzCiAgICAgIHBhcmFtc0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBleGVjdXRpb25QYXJhbXM6IFtdLAogICAgICBqb2JQYXJhbWV0ZXJzOiBbXSwKCiAgICAgIC8vIOaJp+ihjOS7u+WKoeWKoOi9veeKtuaAgQogICAgICBleGVjdXRlTG9hZGluZzogZmFsc2UsCiAgICAgIGRlbGV0ZUxvYWRpbmc6IGZhbHNlLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIgfHwge307CiAgICB9LAogICAgY2FuRWRpdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXIuaXNfYWRtaW4gfHwgKHRoaXMudGFzay51c2VyX2lkID09PSB0aGlzLmN1cnJlbnRVc2VyLmlkKTsKICAgIH0sCiAgICBjYW5NYW5hZ2VQZXJtaXNzaW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXIuaXNfYWRtaW4gfHwgKHRoaXMudGFzay51c2VyX2lkID09PSB0aGlzLmN1cnJlbnRVc2VyLmlkKTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRUYXNrRGV0YWlscygpOwogIH0sCiAgd2F0Y2g6IHsKICAgIGFjdGl2ZVRhYihuZXdWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCA9PT0gJ2V4ZWN1dGlvbnMnKSB7CiAgICAgICAgdGhpcy5sb2FkRXhlY3V0aW9ucygpOwogICAgICB9IGVsc2UgaWYgKG5ld1ZhbCA9PT0gJ3Blcm1pc3Npb25zJyAmJiB0aGlzLmNhbk1hbmFnZVBlcm1pc3Npb25zKSB7CiAgICAgICAgdGhpcy5sb2FkUGVybWlzc2lvbnMoKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yqg6L295Lu75Yqh6K+m5oOFCiAgICBhc3luYyBsb2FkVGFza0RldGFpbHMoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvdGFza3MvJHt0aGlzLmlkfWApOwogICAgICAgIHRoaXMudGFzayA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgCiAgICAgICAgLy8g5Yqg6L295Lu75Yqh5omA5pyJ6ICF5L+h5oGvCiAgICAgICAgaWYgKHRoaXMudGFzay51c2VyX2lkKSB7CiAgICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCB1c2VyUmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYC9hcGkvdXNlcnMvJHt0aGlzLnRhc2sudXNlcl9pZH1gKTsKICAgICAgICAgICAgdGhpcy50YXNrT3duZXIgPSB1c2VyUmVzcG9uc2UuZGF0YS51c2VybmFtZTsKICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+iOt+WPlueUqOaIt+S/oeaBr+Wksei0pTonLCBlcnJvcik7CiAgICAgICAgICAgIC8vIOebtOaOpeaYvuekuueUqOaIt0lE77yM5LiN5re75Yqg5YmN57yACiAgICAgICAgICAgIHRoaXMudGFza093bmVyID0gU3RyaW5nKHRoaXMudGFzay51c2VyX2lkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgCiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yqg6L295Lu75Yqh6K+m5oOF5aSx6LSlOiAnICsgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciB8fCBlcnJvci5tZXNzYWdlKSk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgLy8g6L+U5Zue5Lu75Yqh5YiX6KGo6aG1CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9zeXN0ZW0vdGFzay1tYW5hZ2VyJyk7CiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOWKoOi9veaJp+ihjOiusOW9lQogICAgYXN5bmMgbG9hZEV4ZWN1dGlvbnMoKSB7CiAgICAgIHRoaXMubG9hZGluZ0V4ZWN1dGlvbnMgPSB0cnVlOwogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGAvYXBpL3Rhc2tzLyR7dGhpcy5pZH0vZXhlY3V0aW9uc2ApOwogICAgICAgIHRoaXMuZXhlY3V0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5sb2FkaW5nRXhlY3V0aW9ucyA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veaJp+ihjOiusOW9leWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICAgIHRoaXMubG9hZGluZ0V4ZWN1dGlvbnMgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Yqg6L295p2D6ZmQ6K6+572uCiAgICBhc3luYyBsb2FkUGVybWlzc2lvbnMoKSB7CiAgICAgIHRoaXMubG9hZGluZ1Blcm1pc3Npb25zID0gdHJ1ZTsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgL2FwaS90YXNrcy8ke3RoaXMuaWR9L3Blcm1pc3Npb25zYCk7CiAgICAgICAgdGhpcy5wZXJtaXNzaW9ucyA9IHJlc3BvbnNlLmRhdGEucGVybWlzc2lvbnMgfHwgW107CiAgICAgICAgCiAgICAgICAgLy8g5Yqg6L295Y+v55So55So5oi3CiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQXZhaWxhYmxlVXNlcnMoKTsKICAgICAgICAKICAgICAgICB0aGlzLmxvYWRpbmdQZXJtaXNzaW9ucyA9IGZhbHNlOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veadg+mZkOiuvue9ruWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICAgIHRoaXMubG9hZGluZ1Blcm1pc3Npb25zID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOWKoOi9veWPr+eUqOeUqOaItwogICAgYXN5bmMgbG9hZEF2YWlsYWJsZVVzZXJzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3VzZXJzJyk7CiAgICAgICAgLy8g6L+H5ruk5o6J5bey5pyJ5p2D6ZmQ55qE55So5oi35ZKM5b2T5YmN5Lu75Yqh5omA5pyJ6ICFCiAgICAgICAgdGhpcy5hdmFpbGFibGVVc2VycyA9IHJlc3BvbnNlLmRhdGEuZmlsdGVyKHVzZXIgPT4gewogICAgICAgICAgcmV0dXJuIHVzZXIuaWQgIT09IHRoaXMudGFzay51c2VyX2lkICYmIAogICAgICAgICAgICAgICAgICF0aGlzLnBlcm1pc3Npb25zLnNvbWUocCA9PiBwLnVzZXJfaWQgPT09IHVzZXIuaWQpOwogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veeUqOaIt+WIl+ihqOWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDmoLzlvI/ljJZKZW5raW5z5Y+C5pWw5Li66KGo5qC85pWw5o2uCiAgICBmb3JtYXRKZW5raW5zUGFyYW1zKHBhcmFtcykgewogICAgICBpZiAoIXBhcmFtcykgcmV0dXJuIFtdOwogICAgICByZXR1cm4gT2JqZWN0LmtleXMocGFyYW1zKS5tYXAoa2V5ID0+ICh7CiAgICAgICAgbmFtZToga2V5LAogICAgICAgIHZhbHVlOiBwYXJhbXNba2V5XQogICAgICB9KSk7CiAgICB9LAogICAgCiAgICAvLyDmiafooYzku7vliqEKICAgIGFzeW5jIGV4ZWN1dGVUYXNrKCkgewogICAgICBpZiAodGhpcy50YXNrLnRhc2tfdHlwZSA9PT0gJ2plbmtpbnMnKSB7CiAgICAgICAgLy8g6I635Y+W5Lu75Yqh5Y+C5pWwCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuZXhlY3V0ZUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgCiAgICAgICAgICAvLyDojrflj5ZKZW5raW5z5Lu75Yqh5Y+C5pWwCiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHVybDogdGhpcy50YXNrLmplbmtpbnNfdXJsLAogICAgICAgICAgICB1c2VybmFtZTogdGhpcy50YXNrLmplbmtpbnNfdXNlcm5hbWUgfHwgJycsCiAgICAgICAgICAgIGFwaV90b2tlbjogdGhpcy50YXNrLmplbmtpbnNfYXBpX3Rva2VuIHx8ICcnLAogICAgICAgICAgICBqb2JfbmFtZTogdGhpcy50YXNrLmplbmtpbnNfam9iX25hbWUKICAgICAgICAgIH07CiAgICAgICAgICAKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL2plbmtpbnMvam9iL3BhcmFtZXRlcnMnLCB7IHBhcmFtcyB9KTsKICAgICAgICAgIAogICAgICAgICAgLy8g5aSE55CG5ZON5bqUCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7CiAgICAgICAgICAgIHRoaXMuam9iUGFyYW1ldGVycyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDlh4blpIfmiafooYzlj4LmlbDvvIzkvb/nlKjku7vliqHpu5jorqTlj4LmlbAKICAgICAgICAgICAgdGhpcy5leGVjdXRpb25QYXJhbXMgPSBbXTsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdFBhcmFtcyA9IHRoaXMudGFzay5qZW5raW5zX3BhcmFtZXRlcnMgfHwge307CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDlsIbku7vliqHlj4LmlbDkuI7pu5jorqTlgLzlkIjlubYKICAgICAgICAgICAgcmVzcG9uc2UuZGF0YS5mb3JFYWNoKHBhcmFtID0+IHsKICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGlvblBhcmFtcy5wdXNoKHsKICAgICAgICAgICAgICAgIG5hbWU6IHBhcmFtLm5hbWUsCiAgICAgICAgICAgICAgICB2YWx1ZTogZGVmYXVsdFBhcmFtc1twYXJhbS5uYW1lXSB8fCBwYXJhbS5kZWZhdWx0X3ZhbHVlIHx8ICcnLAogICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHBhcmFtLmRlc2NyaXB0aW9uIHx8ICcnLAogICAgICAgICAgICAgICAgdHlwZTogcGFyYW0udHlwZSB8fCAnc3RyaW5nJywKICAgICAgICAgICAgICAgIGNob2ljZXM6IHBhcmFtLmNob2ljZXMgfHwgW10gLy8g5re75Yqg6YCJ6aG55pWw57uECiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g5pi+56S65Y+C5pWw5a+56K+d5qGGCiAgICAgICAgICAgIHRoaXMucGFyYW1zRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUxvYWRpbmcgPSBmYWxzZTsgLy8g6YeN6KaB77ya5Zyo5pi+56S65a+56K+d5qGG5pe26YeN572ubG9hZGluZ+eKtuaAgQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8g5rKh5pyJ5Y+C5pWw77yM55u05o6l5omn6KGMCiAgICAgICAgICAgIHRoaXMuY29uZmlybUV4ZWN1dGUoKTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5Lu75Yqh5Y+C5pWw5aSx6LSlOicsIGVycm9yKTsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+iOt+WPluS7u+WKoeWPguaVsOWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICAgICAgdGhpcy5leGVjdXRlTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDpnZ5KZW5raW5z5Lu75Yqh77yM55u05o6l5omn6KGMCiAgICAgICAgdGhpcy5jb25maXJtRXhlY3V0ZSgpOwogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDlj5bmtojmiafooYwKICAgIGNhbmNlbEV4ZWN1dGUoKSB7CiAgICAgIHRoaXMucGFyYW1zRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICB0aGlzLmV4ZWN1dGVMb2FkaW5nID0gZmFsc2U7CiAgICAgIHRoaXMuZXhlY3V0aW9uUGFyYW1zID0gW107CiAgICB9LAogICAgCiAgICAvLyDnoa7orqTmiafooYwKICAgIGFzeW5jIGNvbmZpcm1FeGVjdXRlKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuZXhlY3V0ZUxvYWRpbmcgPSB0cnVlOwogICAgICAgIAogICAgICAgIC8vIOaehOW7uuWPguaVsAogICAgICAgIGNvbnN0IHBhcmFtZXRlcnMgPSB7fTsKICAgICAgICBpZiAodGhpcy5leGVjdXRpb25QYXJhbXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5leGVjdXRpb25QYXJhbXMuZm9yRWFjaChwYXJhbSA9PiB7CiAgICAgICAgICAgIHBhcmFtZXRlcnNbcGFyYW0ubmFtZV0gPSBwYXJhbS52YWx1ZTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyDlj5HpgIHmiafooYzor7fmsYIKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLnBvc3QoYC9hcGkvdGFza3MvJHt0aGlzLmlkfS9leGVjdXRlYCwgCiAgICAgICAgICB7IHBhcmFtZXRlcnM6IE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmxlbmd0aCA+IDAgPyBwYXJhbWV0ZXJzIDogdW5kZWZpbmVkIH0sIAogICAgICAgICAgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgICAKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S7u+WKoeW3suaPkOS6pOaJp+ihjCcpOwogICAgICAgIAogICAgICAgIC8vIOWFs+mXreWvueivneahhgogICAgICAgIHRoaXMucGFyYW1zRGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIAogICAgICAgIC8vIOi3s+i9rOWIsOaJp+ihjOivpuaDhemhtQogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvc3lzdGVtL3Rhc2stZXhlY3V0aW9uLyR7cmVzcG9uc2UuZGF0YS5leGVjdXRpb25faWR9YCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5omn6KGM5Lu75Yqh5aSx6LSlOiAnICsgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciB8fCBlcnJvci5tZXNzYWdlKSk7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5leGVjdXRlTG9hZGluZyA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgCiAgICAvLyDmn6XnnIvmiafooYzor6bmg4UKICAgIHZpZXdFeGVjdXRpb24oZXhlY3V0aW9uKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKGAvc3lzdGVtL3Rhc2stZXhlY3V0aW9uLyR7ZXhlY3V0aW9uLmlkfWApOwogICAgfSwKICAgIAogICAgLy8g57uI5q2i5omn6KGMCiAgICBhc3luYyB0ZXJtaW5hdGVFeGVjdXRpb24oZXhlY3V0aW9uKSB7CiAgICAgIHRyeSB7CiAgICAgICAgYXdhaXQgYXhpb3MucG9zdChgL2FwaS9leGVjdXRpb25zLyR7ZXhlY3V0aW9uLmlkfS90ZXJtaW5hdGVgKTsKICAgICAgICAKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+S7u+WKoeW3sue7iOatoicpOwogICAgICAgIAogICAgICAgIC8vIOmHjeaWsOWKoOi9veaJp+ihjOiusOW9lQogICAgICAgIHRoaXMubG9hZEV4ZWN1dGlvbnMoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnu4jmraLku7vliqHlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5pi+56S65re75Yqg5p2D6ZmQ5a+56K+d5qGGCiAgICBzaG93QWRkUGVybWlzc2lvbkRpYWxvZygpIHsKICAgICAgdGhpcy5wZXJtaXNzaW9uRm9ybSA9IHsKICAgICAgICB1c2VyX2lkOiBudWxsLAogICAgICAgIGNhbl92aWV3OiB0cnVlLAogICAgICAgIGNhbl9leGVjdXRlOiBmYWxzZSwKICAgICAgICBjYW5fdGVybWluYXRlOiBmYWxzZSwKICAgICAgICBjYW5fZGVsZXRlOiBmYWxzZQogICAgICB9OwogICAgICB0aGlzLnBlcm1pc3Npb25EaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgIH0sCiAgICAKICAgIC8vIOa3u+WKoOadg+mZkAogICAgYXN5bmMgYWRkUGVybWlzc2lvbigpIHsKICAgICAgaWYgKCF0aGlzLnBlcm1pc3Npb25Gb3JtLnVzZXJfaWQpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+mAieaLqeeUqOaItycpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAKICAgICAgdGhpcy5pc1VwZGF0aW5nUGVybWlzc2lvbiA9IHRydWU7CiAgICAgIAogICAgICB0cnkgewogICAgICAgIC8vIOiOt+WPlueUqOaIt+WQjQogICAgICAgIGNvbnN0IHVzZXIgPSB0aGlzLmF2YWlsYWJsZVVzZXJzLmZpbmQodSA9PiB1LmlkID09PSB0aGlzLnBlcm1pc3Npb25Gb3JtLnVzZXJfaWQpOwogICAgICAgIGNvbnN0IHVzZXJuYW1lID0gdXNlciA/IHVzZXIudXNlcm5hbWUgOiAnJzsKICAgICAgICAKICAgICAgICAvLyDmt7vliqDliLDmnKzlnLDmlbDmja4KICAgICAgICBjb25zdCBuZXdQZXJtaXNzaW9uID0gewogICAgICAgICAgLi4udGhpcy5wZXJtaXNzaW9uRm9ybSwKICAgICAgICAgIHVzZXJuYW1lCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICB0aGlzLnBlcm1pc3Npb25zLnB1c2gobmV3UGVybWlzc2lvbik7CiAgICAgICAgCiAgICAgICAgLy8g5pu05paw5p2D6ZmQCiAgICAgICAgYXdhaXQgdGhpcy5zYXZlUGVybWlzc2lvbnMoKTsKICAgICAgICAKICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+adg+mZkOa3u+WKoOaIkOWKnycpOwogICAgICAgIHRoaXMucGVybWlzc2lvbkRpYWxvZ1Zpc2libGUgPSBmYWxzZTsKICAgICAgICAKICAgICAgICAvLyDmm7TmlrDlj6/nlKjnlKjmiLfliJfooagKICAgICAgICBhd2FpdCB0aGlzLmxvYWRBdmFpbGFibGVVc2VycygpOwogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+a3u+WKoOadg+mZkOWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuaXNVcGRhdGluZ1Blcm1pc3Npb24gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5pu05paw5p2D6ZmQCiAgICBhc3luYyB1cGRhdGVQZXJtaXNzaW9uKHBlcm1pc3Npb24pIHsKICAgICAgdGhpcy5pc1VwZGF0aW5nUGVybWlzc2lvbiA9IHRydWU7CiAgICAgIAogICAgICB0cnkgewogICAgICAgIGF3YWl0IHRoaXMuc2F2ZVBlcm1pc3Npb25zKCk7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmnYPpmZDmm7TmlrDmiJDlip8nKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmm7TmlrDmnYPpmZDlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICAvLyDph43mlrDliqDovb3mnYPpmZAKICAgICAgICBhd2FpdCB0aGlzLmxvYWRQZXJtaXNzaW9ucygpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuaXNVcGRhdGluZ1Blcm1pc3Npb24gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g56e76Zmk5p2D6ZmQCiAgICBhc3luYyByZW1vdmVQZXJtaXNzaW9uKHBlcm1pc3Npb24pIHsKICAgICAgdGhpcy5pc1VwZGF0aW5nUGVybWlzc2lvbiA9IHRydWU7CiAgICAgIAogICAgICB0cnkgewogICAgICAgIC8vIOS7juacrOWcsOaVsOaNruS4reenu+mZpAogICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5wZXJtaXNzaW9ucy5maW5kSW5kZXgocCA9PiBwLnVzZXJfaWQgPT09IHBlcm1pc3Npb24udXNlcl9pZCk7CiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgdGhpcy5wZXJtaXNzaW9ucy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICAvLyDmm7TmlrDmnYPpmZAKICAgICAgICBhd2FpdCB0aGlzLnNhdmVQZXJtaXNzaW9ucygpOwogICAgICAgIAogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5p2D6ZmQ56e76Zmk5oiQ5YqfJyk7CiAgICAgICAgCiAgICAgICAgLy8g5pu05paw5Y+v55So55So5oi35YiX6KGoCiAgICAgICAgYXdhaXQgdGhpcy5sb2FkQXZhaWxhYmxlVXNlcnMoKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfnp7vpmaTmnYPpmZDlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICAvLyDph43mlrDliqDovb3mnYPpmZAKICAgICAgICBhd2FpdCB0aGlzLmxvYWRQZXJtaXNzaW9ucygpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMuaXNVcGRhdGluZ1Blcm1pc3Npb24gPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5L+d5a2Y5omA5pyJ5p2D6ZmQCiAgICBhc3luYyBzYXZlUGVybWlzc2lvbnMoKSB7CiAgICAgIGF3YWl0IGF4aW9zLnBvc3QoYC9hcGkvdGFza3MvJHt0aGlzLmlkfS9wZXJtaXNzaW9uc2AsIHsKICAgICAgICBwZXJtaXNzaW9uczogdGhpcy5wZXJtaXNzaW9ucwogICAgICB9KTsKICAgIH0sCiAgICAKICAgIC8vIOagvOW8j+WMluaXpeacnwogICAgZm9ybWF0RGF0ZShkYXRlU3RyaW5nKSB7CiAgICAgIGlmICghZGF0ZVN0cmluZykgcmV0dXJuICcnOwogICAgICAKICAgICAgLy8g5Yib5bu65pel5pyf5a+56LGhCiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTsKICAgICAgCiAgICAgIC8vIOiOt+WPllVUQ+aXtumXtOW5tua3u+WKoDjlsI/ml7bvvIjkuJzlhavljLrvvIkKICAgICAgY29uc3QgdXRjVGltZSA9IGRhdGUuZ2V0VGltZSgpOwogICAgICBjb25zdCBiZWlqaW5nVGltZSA9IG5ldyBEYXRlKHV0Y1RpbWUgKyA4ICogNjAgKiA2MCAqIDEwMDApOwogICAgICAKICAgICAgLy8g5qC85byP5YyW5Li65pys5Zyw5pe26Ze05a2X56ym5LiyCiAgICAgIHJldHVybiBiZWlqaW5nVGltZS50b0xvY2FsZVN0cmluZygnemgtQ04nLCB7CiAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgIG1vbnRoOiAnMi1kaWdpdCcsCiAgICAgICAgZGF5OiAnMi1kaWdpdCcsCiAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgIHNlY29uZDogJzItZGlnaXQnLAogICAgICAgIGhvdXIxMjogZmFsc2UKICAgICAgfSk7CiAgICB9LAogICAgCiAgICAvLyDojrflj5bku7vliqHnsbvlnovmoIfnrb4KICAgIGdldFRhc2tUeXBlTGFiZWwodHlwZSkgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnamVua2lucyc6ICdKZW5raW5z5Lu75YqhJywKICAgICAgICAnc2NyaXB0JzogJ+iEmuacrOS7u+WKoScsCiAgICAgICAgJ2NvbW1hbmQnOiAn5ZG95Luk5Lu75YqhJwogICAgICB9OwogICAgICByZXR1cm4gdHlwZXNbdHlwZV0gfHwgdHlwZTsKICAgIH0sCiAgICAKICAgIC8vIOiOt+WPluS7u+WKoeexu+Wei+agh+etvuagt+W8jwogICAgZ2V0VGFza1R5cGVUYWcodHlwZSkgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnamVua2lucyc6ICdwcmltYXJ5JywKICAgICAgICAnc2NyaXB0JzogJ3N1Y2Nlc3MnLAogICAgICAgICdjb21tYW5kJzogJ3dhcm5pbmcnCiAgICAgIH07CiAgICAgIHJldHVybiB0eXBlc1t0eXBlXSB8fCAnJzsKICAgIH0sCiAgICAKICAgIC8vIOiOt+WPlueKtuaAgeagh+etvgogICAgZ2V0U3RhdHVzTGFiZWwoc3RhdHVzKSB7CiAgICAgIGNvbnN0IHN0YXR1c2VzID0gewogICAgICAgICdwZW5kaW5nJzogJ+W+heaJp+ihjCcsCiAgICAgICAgJ3J1bm5pbmcnOiAn5omn6KGM5LitJywKICAgICAgICAnc3VjY2Vzcyc6ICfmiJDlip8nLAogICAgICAgICdmYWlsZWQnOiAn5aSx6LSlJywKICAgICAgICAndGVybWluYXRlZCc6ICflt7Lnu4jmraInCiAgICAgIH07CiAgICAgIHJldHVybiBzdGF0dXNlc1tzdGF0dXNdIHx8IHN0YXR1czsKICAgIH0sCiAgICAKICAgIC8vIOiOt+WPlueKtuaAgeagh+etvuagt+W8jwogICAgZ2V0U3RhdHVzVHlwZShzdGF0dXMpIHsKICAgICAgY29uc3QgdHlwZXMgPSB7CiAgICAgICAgJ3BlbmRpbmcnOiAnaW5mbycsCiAgICAgICAgJ3J1bm5pbmcnOiAncHJpbWFyeScsCiAgICAgICAgJ3N1Y2Nlc3MnOiAnc3VjY2VzcycsCiAgICAgICAgJ2ZhaWxlZCc6ICdkYW5nZXInLAogICAgICAgICd0ZXJtaW5hdGVkJzogJ3dhcm5pbmcnCiAgICAgIH07CiAgICAgIHJldHVybiB0eXBlc1tzdGF0dXNdIHx8ICcnOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["TaskDetail.vue"],"names":[],"mappings":";AAkVA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskDetail.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"task-detail\">\n    <div class=\"page-header\">\n      <div class=\"header-left\">\n        <h2 class=\"page-title\">{{ task.name }}</h2>\n        <el-tag :type=\"getTaskTypeTag(task.task_type)\" class=\"task-type-tag\">\n          {{ getTaskTypeLabel(task.task_type) }}\n        </el-tag>\n        <el-tag :type=\"task.is_enabled ? 'success' : 'danger'\" class=\"status-tag\">\n          {{ task.is_enabled ? '已启用' : '已禁用' }}\n        </el-tag>\n      </div>\n      <div class=\"header-actions\">\n        <el-button type=\"primary\" icon=\"el-icon-back\" @click=\"$router.push('/system/task-manager')\">\n          返回列表\n        </el-button>\n        <el-button \n          type=\"success\" \n          icon=\"el-icon-video-play\" \n          @click=\"executeTask\" \n          :disabled=\"!task.is_enabled\">\n          执行任务\n        </el-button>\n      </div>\n    </div>\n\n    <el-tabs v-model=\"activeTab\">\n      <el-tab-pane label=\"任务详情\" name=\"details\">\n        <el-card class=\"detail-card\">\n          <div slot=\"header\">\n            <span>基本信息</span>\n            <el-button \n              style=\"float: right; padding: 3px 0\" \n              type=\"text\" \n              icon=\"el-icon-edit\"\n              @click=\"$router.push('/system/task-manager')\"\n              v-if=\"canEdit\">\n              编辑\n            </el-button>\n          </div>\n          \n          <el-descriptions :column=\"2\" border>\n            <el-descriptions-item label=\"任务名称\">{{ task.name }}</el-descriptions-item>\n            <el-descriptions-item label=\"任务类型\">{{ getTaskTypeLabel(task.task_type) }}</el-descriptions-item>\n            <el-descriptions-item label=\"创建时间\">{{ formatDate(task.created_at) }}</el-descriptions-item>\n            <el-descriptions-item label=\"更新时间\">{{ formatDate(task.updated_at) }}</el-descriptions-item>\n            <el-descriptions-item label=\"状态\">\n              <el-tag :type=\"task.is_enabled ? 'success' : 'danger'\">\n                {{ task.is_enabled ? '已启用' : '已禁用' }}\n              </el-tag>\n            </el-descriptions-item>\n            <el-descriptions-item label=\"创建者\">{{ taskOwner }}</el-descriptions-item>\n            <el-descriptions-item label=\"描述\" :span=\"2\">\n              {{ task.description || '无描述' }}\n            </el-descriptions-item>\n          </el-descriptions>\n          \n          <!-- Jenkins任务特有信息 -->\n          <template v-if=\"task.task_type === 'jenkins'\">\n            <div class=\"section-divider\">Jenkins任务信息</div>\n            <el-descriptions :column=\"1\" border>\n              <el-descriptions-item label=\"Jenkins URL\">{{ task.jenkins_url }}</el-descriptions-item>\n              <el-descriptions-item label=\"Jenkins任务名称\">{{ task.jenkins_job_name }}</el-descriptions-item>\n              <el-descriptions-item label=\"Jenkins用户名\">{{ task.jenkins_username }}</el-descriptions-item>\n              <el-descriptions-item label=\"任务参数\" v-if=\"Object.keys(task.jenkins_parameters || {}).length > 0\">\n                <div class=\"params-table\">\n                  <el-table :data=\"formatJenkinsParams(task.jenkins_parameters)\" border size=\"small\">\n                    <el-table-column prop=\"name\" label=\"参数名\" width=\"180\"></el-table-column>\n                    <el-table-column prop=\"value\" label=\"默认值\"></el-table-column>\n                  </el-table>\n                </div>\n              </el-descriptions-item>\n            </el-descriptions>\n          </template>\n          \n          <!-- 脚本任务特有信息 -->\n          <template v-if=\"task.task_type === 'script'\">\n            <div class=\"section-divider\">脚本信息</div>\n            <el-descriptions :column=\"1\" border>\n              <el-descriptions-item label=\"脚本类型\">{{ task.script_type }}</el-descriptions-item>\n              <el-descriptions-item label=\"脚本内容\">\n                <pre class=\"code-block\">{{ task.script_content }}</pre>\n              </el-descriptions-item>\n            </el-descriptions>\n          </template>\n          \n          <!-- 命令任务特有信息 -->\n          <template v-if=\"task.task_type === 'command'\">\n            <div class=\"section-divider\">命令信息</div>\n            <el-descriptions :column=\"1\" border>\n              <el-descriptions-item label=\"命令内容\">\n                <pre class=\"code-block\">{{ task.command }}</pre>\n              </el-descriptions-item>\n            </el-descriptions>\n          </template>\n        </el-card>\n      </el-tab-pane>\n      \n      <el-tab-pane label=\"执行记录\" name=\"executions\">\n        <el-card class=\"executions-card\">\n          <div slot=\"header\">\n            <span>执行历史记录</span>\n          </div>\n          \n          <el-table\n            :data=\"executions\"\n            style=\"width: 100%\"\n            v-loading=\"loadingExecutions\"\n            border\n            stripe\n          >\n            <el-table-column prop=\"id\" label=\"ID\" width=\"80\"></el-table-column>\n            <el-table-column label=\"状态\" width=\"120\">\n              <template slot-scope=\"scope\">\n                <el-tag :type=\"getStatusType(scope.row.status)\">\n                  {{ getStatusLabel(scope.row.status) }}\n                </el-tag>\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"start_time\" label=\"开始时间\" width=\"180\">\n              <template slot-scope=\"scope\">\n                {{ formatDate(scope.row.start_time) }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"end_time\" label=\"结束时间\" width=\"180\">\n              <template slot-scope=\"scope\">\n                {{ scope.row.end_time ? formatDate(scope.row.end_time) : '进行中' }}\n              </template>\n            </el-table-column>\n            <el-table-column prop=\"result\" label=\"结果\" min-width=\"150\"></el-table-column>\n            <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"primary\"\n                  icon=\"el-icon-view\"\n                  @click=\"viewExecution(scope.row)\"\n                >查看</el-button>\n                <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  icon=\"el-icon-close\"\n                  @click=\"terminateExecution(scope.row)\"\n                  v-if=\"scope.row.status === 'pending' || scope.row.status === 'running'\"\n                >终止</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          \n          <div class=\"no-data\" v-if=\"executions.length === 0 && !loadingExecutions\">\n            <i class=\"el-icon-info\"></i>\n            <span>暂无执行记录</span>\n          </div>\n        </el-card>\n      </el-tab-pane>\n      \n      <el-tab-pane label=\"权限管理\" name=\"permissions\" v-if=\"canManagePermissions\">\n        <el-card class=\"permissions-card\">\n          <div slot=\"header\">\n            <span>任务权限管理</span>\n            <el-button \n              style=\"float: right; padding: 3px 0\" \n              type=\"text\" \n              icon=\"el-icon-plus\"\n              @click=\"showAddPermissionDialog\">\n              添加用户权限\n            </el-button>\n          </div>\n          \n          <el-table\n            :data=\"permissions\"\n            style=\"width: 100%\"\n            v-loading=\"loadingPermissions\"\n            border\n            stripe\n          >\n            <el-table-column prop=\"username\" label=\"用户名\" width=\"180\"></el-table-column>\n            <el-table-column label=\"查看权限\" width=\"120\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-switch\n                  v-model=\"scope.row.can_view\"\n                  active-color=\"#13ce66\"\n                  @change=\"updatePermission(scope.row)\"\n                  :disabled=\"isUpdatingPermission\"\n                ></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"执行权限\" width=\"120\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-switch\n                  v-model=\"scope.row.can_execute\"\n                  active-color=\"#13ce66\"\n                  @change=\"updatePermission(scope.row)\"\n                  :disabled=\"isUpdatingPermission\"\n                ></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"终止权限\" width=\"120\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-switch\n                  v-model=\"scope.row.can_terminate\"\n                  active-color=\"#13ce66\"\n                  @change=\"updatePermission(scope.row)\"\n                  :disabled=\"isUpdatingPermission\"\n                ></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"删除权限\" width=\"120\" align=\"center\">\n              <template slot-scope=\"scope\">\n                <el-switch\n                  v-model=\"scope.row.can_delete\"\n                  active-color=\"#13ce66\"\n                  @change=\"updatePermission(scope.row)\"\n                  :disabled=\"isUpdatingPermission\"\n                ></el-switch>\n              </template>\n            </el-table-column>\n            <el-table-column label=\"操作\" width=\"120\" fixed=\"right\">\n              <template slot-scope=\"scope\">\n                <el-button\n                  size=\"mini\"\n                  type=\"danger\"\n                  icon=\"el-icon-delete\"\n                  @click=\"removePermission(scope.row)\"\n                  :disabled=\"isUpdatingPermission\"\n                >删除</el-button>\n              </template>\n            </el-table-column>\n          </el-table>\n          \n          <div class=\"no-data\" v-if=\"permissions.length === 0 && !loadingPermissions\">\n            <i class=\"el-icon-info\"></i>\n            <span>暂无其他用户权限设置</span>\n          </div>\n        </el-card>\n      </el-tab-pane>\n    </el-tabs>\n    \n    <!-- 添加用户权限对话框 -->\n    <el-dialog\n      title=\"添加用户权限\"\n      :visible.sync=\"permissionDialogVisible\"\n      width=\"40%\">\n      <el-form :model=\"permissionForm\" label-width=\"100px\">\n        <el-form-item label=\"选择用户\" prop=\"user_id\">\n          <el-select v-model=\"permissionForm.user_id\" placeholder=\"请选择用户\" style=\"width: 100%\">\n            <el-option\n              v-for=\"user in availableUsers\"\n              :key=\"user.id\"\n              :label=\"user.username\"\n              :value=\"user.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"查看权限\">\n          <el-switch v-model=\"permissionForm.can_view\"></el-switch>\n        </el-form-item>\n        <el-form-item label=\"执行权限\">\n          <el-switch v-model=\"permissionForm.can_execute\"></el-switch>\n        </el-form-item>\n        <el-form-item label=\"终止权限\">\n          <el-switch v-model=\"permissionForm.can_terminate\"></el-switch>\n        </el-form-item>\n        <el-form-item label=\"删除权限\">\n          <el-switch v-model=\"permissionForm.can_delete\"></el-switch>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"permissionDialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"addPermission\" :loading=\"isUpdatingPermission\">确定</el-button>\n      </span>\n    </el-dialog>\n\n    <!-- 参数编辑对话框 -->\n    <el-dialog\n      title=\"编辑任务参数\"\n      :visible.sync=\"paramsDialogVisible\"\n      width=\"750px\"\n      @close=\"cancelExecute\"\n    >\n      <div v-if=\"task.task_type === 'jenkins'\">\n        <div class=\"params-editor\">\n          <div v-for=\"(param, index) in executionParams\" :key=\"index\" class=\"param-item\">\n            <el-form :inline=\"false\" class=\"param-form\">\n              <el-form-item :label=\"param.name\">\n                <!-- 选择类型参数 -->\n                <el-select \n                  v-if=\"param.type === 'ChoiceParameterDefinition'\" \n                  v-model=\"param.value\" \n                  :placeholder=\"`选择${param.name}参数值`\"\n                  style=\"width: 100%\"\n                >\n                  <el-option \n                    v-for=\"choice in param.choices\" \n                    :key=\"choice\" \n                    :label=\"choice\" \n                    :value=\"choice\"\n                  ></el-option>\n                </el-select>\n                <!-- 布尔类型参数 -->\n                <el-switch \n                  v-else-if=\"param.type === 'BooleanParameterDefinition'\"\n                  v-model=\"param.value\"\n                  active-text=\"是\"\n                  inactive-text=\"否\"\n                ></el-switch>\n                <!-- 默认文本类型参数 -->\n                <el-input \n                  v-else\n                  v-model=\"param.value\" \n                  type=\"textarea\" \n                  :rows=\"5\"\n                  :placeholder=\"`输入${param.name}参数值`\"\n                  class=\"param-textarea\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item v-if=\"param.description\" label=\"描述\">\n                <el-tooltip :content=\"param.description\" placement=\"top\">\n                  <span class=\"param-description\">{{ param.description }}</span>\n                </el-tooltip>\n              </el-form-item>\n            </el-form>\n          </div>\n          <div v-if=\"executionParams.length === 0\" class=\"no-params\">\n            <i class=\"el-icon-info\"></i>\n            <p>该任务没有定义参数</p>\n          </div>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelExecute\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmExecute\" :loading=\"executeLoading\">确认执行</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'TaskDetail',\n  props: {\n    id: {\n      type: [Number, String],\n      required: true\n    }\n  },\n  data() {\n    return {\n      task: {},\n      activeTab: 'details',\n      loading: false,\n      \n      // 执行记录相关\n      executions: [],\n      loadingExecutions: false,\n      \n      // 权限相关\n      permissions: [],\n      loadingPermissions: false,\n      isUpdatingPermission: false,\n      permissionDialogVisible: false,\n      permissionForm: {\n        user_id: null,\n        can_view: true,\n        can_execute: false,\n        can_terminate: false,\n        can_delete: false\n      },\n      availableUsers: [],\n      \n      // 任务所有者\n      taskOwner: '',\n\n      // 参数对话框相关\n      paramsDialogVisible: false,\n      executionParams: [],\n      jobParameters: [],\n\n      // 执行任务加载状态\n      executeLoading: false,\n      deleteLoading: false,\n    };\n  },\n  computed: {\n    currentUser() {\n      return this.$store.state.user || {};\n    },\n    canEdit() {\n      return this.currentUser.is_admin || (this.task.user_id === this.currentUser.id);\n    },\n    canManagePermissions() {\n      return this.currentUser.is_admin || (this.task.user_id === this.currentUser.id);\n    }\n  },\n  created() {\n    this.loadTaskDetails();\n  },\n  watch: {\n    activeTab(newVal) {\n      if (newVal === 'executions') {\n        this.loadExecutions();\n      } else if (newVal === 'permissions' && this.canManagePermissions) {\n        this.loadPermissions();\n      }\n    }\n  },\n  methods: {\n    // 加载任务详情\n    async loadTaskDetails() {\n      this.loading = true;\n      try {\n        const response = await axios.get(`/api/tasks/${this.id}`);\n        this.task = response.data;\n        \n        // 加载任务所有者信息\n        if (this.task.user_id) {\n          try {\n            const userResponse = await axios.get(`/api/users/${this.task.user_id}`);\n            this.taskOwner = userResponse.data.username;\n          } catch (error) {\n            console.error('获取用户信息失败:', error);\n            // 直接显示用户ID，不添加前缀\n            this.taskOwner = String(this.task.user_id);\n          }\n        }\n        \n        this.loading = false;\n      } catch (error) {\n        this.$message.error('加载任务详情失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.loading = false;\n        // 返回任务列表页\n        this.$router.push('/system/task-manager');\n      }\n    },\n    \n    // 加载执行记录\n    async loadExecutions() {\n      this.loadingExecutions = true;\n      try {\n        const response = await axios.get(`/api/tasks/${this.id}/executions`);\n        this.executions = response.data;\n        this.loadingExecutions = false;\n      } catch (error) {\n        this.$message.error('加载执行记录失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.loadingExecutions = false;\n      }\n    },\n    \n    // 加载权限设置\n    async loadPermissions() {\n      this.loadingPermissions = true;\n      try {\n        const response = await axios.get(`/api/tasks/${this.id}/permissions`);\n        this.permissions = response.data.permissions || [];\n        \n        // 加载可用用户\n        await this.loadAvailableUsers();\n        \n        this.loadingPermissions = false;\n      } catch (error) {\n        this.$message.error('加载权限设置失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.loadingPermissions = false;\n      }\n    },\n    \n    // 加载可用用户\n    async loadAvailableUsers() {\n      try {\n        const response = await axios.get('/api/users');\n        // 过滤掉已有权限的用户和当前任务所有者\n        this.availableUsers = response.data.filter(user => {\n          return user.id !== this.task.user_id && \n                 !this.permissions.some(p => p.user_id === user.id);\n        });\n      } catch (error) {\n        this.$message.error('加载用户列表失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      }\n    },\n    \n    // 格式化Jenkins参数为表格数据\n    formatJenkinsParams(params) {\n      if (!params) return [];\n      return Object.keys(params).map(key => ({\n        name: key,\n        value: params[key]\n      }));\n    },\n    \n    // 执行任务\n    async executeTask() {\n      if (this.task.task_type === 'jenkins') {\n        // 获取任务参数\n        try {\n          this.executeLoading = true;\n          \n          // 获取Jenkins任务参数\n          const params = {\n            url: this.task.jenkins_url,\n            username: this.task.jenkins_username || '',\n            api_token: this.task.jenkins_api_token || '',\n            job_name: this.task.jenkins_job_name\n          };\n          \n          const response = await axios.get('/api/jenkins/job/parameters', { params });\n          \n          // 处理响应\n          if (response.data && Array.isArray(response.data)) {\n            this.jobParameters = response.data;\n            \n            // 准备执行参数，使用任务默认参数\n            this.executionParams = [];\n            const defaultParams = this.task.jenkins_parameters || {};\n            \n            // 将任务参数与默认值合并\n            response.data.forEach(param => {\n              this.executionParams.push({\n                name: param.name,\n                value: defaultParams[param.name] || param.default_value || '',\n                description: param.description || '',\n                type: param.type || 'string',\n                choices: param.choices || [] // 添加选项数组\n              });\n            });\n            \n            // 显示参数对话框\n            this.paramsDialogVisible = true;\n            this.executeLoading = false; // 重要：在显示对话框时重置loading状态\n          } else {\n            // 没有参数，直接执行\n            this.confirmExecute();\n          }\n        } catch (error) {\n          console.error('获取任务参数失败:', error);\n          this.$message.error('获取任务参数失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n          this.executeLoading = false;\n        }\n      } else {\n        // 非Jenkins任务，直接执行\n        this.confirmExecute();\n      }\n    },\n    \n    // 取消执行\n    cancelExecute() {\n      this.paramsDialogVisible = false;\n      this.executeLoading = false;\n      this.executionParams = [];\n    },\n    \n    // 确认执行\n    async confirmExecute() {\n      try {\n        this.executeLoading = true;\n        \n        // 构建参数\n        const parameters = {};\n        if (this.executionParams.length > 0) {\n          this.executionParams.forEach(param => {\n            parameters[param.name] = param.value;\n          });\n        }\n        \n        // 发送执行请求\n        const response = await axios.post(`/api/tasks/${this.id}/execute`, \n          { parameters: Object.keys(parameters).length > 0 ? parameters : undefined }, \n          {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        this.$message.success('任务已提交执行');\n        \n        // 关闭对话框\n        this.paramsDialogVisible = false;\n        \n        // 跳转到执行详情页\n        this.$router.push(`/system/task-execution/${response.data.execution_id}`);\n      } catch (error) {\n        this.$message.error('执行任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      } finally {\n        this.executeLoading = false;\n      }\n    },\n    \n    // 查看执行详情\n    viewExecution(execution) {\n      this.$router.push(`/system/task-execution/${execution.id}`);\n    },\n    \n    // 终止执行\n    async terminateExecution(execution) {\n      try {\n        await axios.post(`/api/executions/${execution.id}/terminate`);\n        \n        this.$message.success('任务已终止');\n        \n        // 重新加载执行记录\n        this.loadExecutions();\n      } catch (error) {\n        this.$message.error('终止任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      }\n    },\n    \n    // 显示添加权限对话框\n    showAddPermissionDialog() {\n      this.permissionForm = {\n        user_id: null,\n        can_view: true,\n        can_execute: false,\n        can_terminate: false,\n        can_delete: false\n      };\n      this.permissionDialogVisible = true;\n    },\n    \n    // 添加权限\n    async addPermission() {\n      if (!this.permissionForm.user_id) {\n        this.$message.warning('请选择用户');\n        return;\n      }\n      \n      this.isUpdatingPermission = true;\n      \n      try {\n        // 获取用户名\n        const user = this.availableUsers.find(u => u.id === this.permissionForm.user_id);\n        const username = user ? user.username : '';\n        \n        // 添加到本地数据\n        const newPermission = {\n          ...this.permissionForm,\n          username\n        };\n        \n        this.permissions.push(newPermission);\n        \n        // 更新权限\n        await this.savePermissions();\n        \n        this.$message.success('权限添加成功');\n        this.permissionDialogVisible = false;\n        \n        // 更新可用用户列表\n        await this.loadAvailableUsers();\n      } catch (error) {\n        this.$message.error('添加权限失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      } finally {\n        this.isUpdatingPermission = false;\n      }\n    },\n    \n    // 更新权限\n    async updatePermission(permission) {\n      this.isUpdatingPermission = true;\n      \n      try {\n        await this.savePermissions();\n        this.$message.success('权限更新成功');\n      } catch (error) {\n        this.$message.error('更新权限失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        // 重新加载权限\n        await this.loadPermissions();\n      } finally {\n        this.isUpdatingPermission = false;\n      }\n    },\n    \n    // 移除权限\n    async removePermission(permission) {\n      this.isUpdatingPermission = true;\n      \n      try {\n        // 从本地数据中移除\n        const index = this.permissions.findIndex(p => p.user_id === permission.user_id);\n        if (index !== -1) {\n          this.permissions.splice(index, 1);\n        }\n        \n        // 更新权限\n        await this.savePermissions();\n        \n        this.$message.success('权限移除成功');\n        \n        // 更新可用用户列表\n        await this.loadAvailableUsers();\n      } catch (error) {\n        this.$message.error('移除权限失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        // 重新加载权限\n        await this.loadPermissions();\n      } finally {\n        this.isUpdatingPermission = false;\n      }\n    },\n    \n    // 保存所有权限\n    async savePermissions() {\n      await axios.post(`/api/tasks/${this.id}/permissions`, {\n        permissions: this.permissions\n      });\n    },\n    \n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return '';\n      \n      // 创建日期对象\n      const date = new Date(dateString);\n      \n      // 获取UTC时间并添加8小时（东八区）\n      const utcTime = date.getTime();\n      const beijingTime = new Date(utcTime + 8 * 60 * 60 * 1000);\n      \n      // 格式化为本地时间字符串\n      return beijingTime.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n      });\n    },\n    \n    // 获取任务类型标签\n    getTaskTypeLabel(type) {\n      const types = {\n        'jenkins': 'Jenkins任务',\n        'script': '脚本任务',\n        'command': '命令任务'\n      };\n      return types[type] || type;\n    },\n    \n    // 获取任务类型标签样式\n    getTaskTypeTag(type) {\n      const types = {\n        'jenkins': 'primary',\n        'script': 'success',\n        'command': 'warning'\n      };\n      return types[type] || '';\n    },\n    \n    // 获取状态标签\n    getStatusLabel(status) {\n      const statuses = {\n        'pending': '待执行',\n        'running': '执行中',\n        'success': '成功',\n        'failed': '失败',\n        'terminated': '已终止'\n      };\n      return statuses[status] || status;\n    },\n    \n    // 获取状态标签样式\n    getStatusType(status) {\n      const types = {\n        'pending': 'info',\n        'running': 'primary',\n        'success': 'success',\n        'failed': 'danger',\n        'terminated': 'warning'\n      };\n      return types[status] || '';\n    }\n  }\n};\n</script>\n\n<style scoped>\n.task-detail {\n  padding: 20px;\n}\n\n.page-header {\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-left {\n  display: flex;\n  align-items: center;\n}\n\n.page-title {\n  font-size: 24px;\n  margin: 0;\n  margin-right: 15px;\n}\n\n.task-type-tag,\n.status-tag {\n  margin-right: 10px;\n}\n\n.detail-card,\n.executions-card,\n.permissions-card {\n  margin-bottom: 20px;\n}\n\n.section-divider {\n  font-size: 16px;\n  font-weight: bold;\n  margin: 20px 0 10px 0;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #EBEEF5;\n}\n\n.code-block {\n  background-color: #f5f7fa;\n  border: 1px solid #e4e7ed;\n  border-radius: 4px;\n  padding: 10px;\n  font-family: monospace;\n  white-space: pre-wrap;\n  word-break: break-all;\n  max-height: 300px;\n  overflow-y: auto;\n}\n\n.no-data {\n  padding: 30px 0;\n  text-align: center;\n  color: #909399;\n}\n\n.no-data i {\n  font-size: 30px;\n  margin-bottom: 10px;\n  display: block;\n}\n\n.params-table {\n  max-width: 100%;\n}\n\n.params-table .el-table {\n  margin-bottom: 0;\n}\n\n.params-editor {\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.param-item {\n  margin-bottom: 10px;\n  padding: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.param-item:last-child {\n  border-bottom: none;\n}\n\n.param-form {\n  display: flex;\n  align-items: center;\n}\n\n.param-form .el-form-item {\n  margin-bottom: 0;\n}\n\n.no-params {\n  text-align: center;\n  padding: 20px;\n  color: #909399;\n}\n\n.no-params i {\n  font-size: 30px;\n  margin-bottom: 10px;\n}\n\n.param-description {\n  color: #606266;\n  font-size: 13px;\n  line-height: 1.4;\n  display: block;\n  word-break: break-word;\n}\n\n.param-textarea {\n  width: 100%;\n  font-family: Consolas, Monaco, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.param-textarea >>> .el-textarea__inner {\n  border-radius: 4px;\n  border-color: #dcdfe6;\n  padding: 10px;\n  min-height: 120px !important;\n  transition: border-color 0.2s ease;\n}\n\n.param-textarea >>> .el-textarea__inner:focus {\n  border-color: #409EFF;\n}\n\n.param-textarea >>> .el-textarea__inner:hover {\n  border-color: #c0c4cc;\n}\n</style> "]}]}