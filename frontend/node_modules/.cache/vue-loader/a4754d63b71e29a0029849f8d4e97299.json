{"remainingRequest":"D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\gatekeeper\\frontend\\src\\components\\TaskManager.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\gatekeeper\\frontend\\src\\components\\TaskManager.vue","mtime":1753341336500},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1747724958365},{"path":"D:\\gatekeeper\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1747724956321},{"path":"D:\\gatekeeper\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1747724959585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Rhc2tNYW5hZ2VyJywKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFza3M6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2VhcmNoUXVlcnk6ICcnLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbFRhc2tzOiAwLAogICAgICB0b3RhbEZpbHRlcmVkVGFza3M6IDAsCiAgICAgIHRhc2tWaWV3czogW10sCiAgICAgIHZpZXdGaWx0ZXI6ICdhbGwnLAogICAgICAKICAgICAgLy8g5a+56K+d5qGG55u45YWzCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBkaWFsb2dUaXRsZTogJ+a3u+WKoOS7u+WKoScsCiAgICAgIGlzRWRpdDogZmFsc2UsCiAgICAgIHRhc2tGb3JtOiB7CiAgICAgICAgbmFtZTogJycsCiAgICAgICAgdGFza190eXBlOiAnamVua2lucycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGlzX2VuYWJsZWQ6IHRydWUsCiAgICAgICAgdmlld19pZDogbnVsbCwKICAgICAgICBqZW5raW5zX3VybDogJycsCiAgICAgICAgamVua2luc19qb2JfbmFtZTogJycsCiAgICAgICAgamVua2luc191c2VybmFtZTogJycsCiAgICAgICAgamVua2luc19hcGlfdG9rZW46ICcnLAogICAgICAgIGplbmtpbnNfcGFyYW1ldGVyczoge30sCiAgICAgICAgc2NyaXB0X3R5cGU6ICcnLAogICAgICAgIHNjcmlwdF9jb250ZW50OiAnJywKICAgICAgICBjb21tYW5kOiAnJwogICAgICB9LAogICAgICBmb3JtUnVsZXM6IHsKICAgICAgICBuYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5Lu75Yqh5ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICB7IG1pbjogMiwgbWF4OiA1MCwgbWVzc2FnZTogJ+mVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0sCiAgICAgICAgdGFza190eXBlOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5Lu75Yqh57G75Z6LJywgdHJpZ2dlcjogJ2NoYW5nZScgfQogICAgICAgIF0sCiAgICAgICAgamVua2luc191cmw6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICdKZW5raW5zIFVSTOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBqZW5raW5zX2pvYl9uYW1lOiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAnSmVua2luc+S7u+WKoeWQjeensOS4jeiDveS4uuepuicsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgXSwKICAgICAgICBzY3JpcHRfdHlwZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeiEmuacrOexu+WeiycsIHRyaWdnZXI6ICdjaGFuZ2UnIH0KICAgICAgICBdLAogICAgICAgIHNjcmlwdF9jb250ZW50OiBbCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6ISa5pys5YaF5a655LiN6IO95Li656m6JywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICBdLAogICAgICAgIGNvbW1hbmQ6IFsKICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICflkb3ku6TlhoXlrrnkuI3og73kuLrnqbonLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgIF0KICAgICAgfSwKICAgICAgc2F2ZUxvYWRpbmc6IGZhbHNlLAogICAgICAKICAgICAgLy8gSmVua2luc+ebuOWFswogICAgICBqZW5raW5zSm9iczogW10sCiAgICAgIGxvYWRpbmdKZW5raW5zSm9iczogZmFsc2UsCiAgICAgIGxvYWRpbmdKb2JQYXJhbWV0ZXJzOiBmYWxzZSwKICAgICAgCiAgICAgIC8vIOWIoOmZpOebuOWFswogICAgICBkZWxldGVEaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgdGFza1RvRGVsZXRlOiBudWxsLAogICAgICBkZWxldGVMb2FkaW5nOiBmYWxzZSwKCiAgICAgIC8vIEplbmtpbnPlj4LmlbDnm7jlhbMKICAgICAgamVua2luc1BhcmFtczogW10sIC8vIOeUqOS6jlVJ5bGV56S655qESmVua2luc+WPguaVsOaVsOe7hAogICAgICAKICAgICAgLy8g5Y+C5pWw5a+56K+d5qGG55u45YWzCiAgICAgIHBhcmFtc0RpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBleGVjdXRpb25QYXJhbXM6IFtdLAogICAgICBqb2JQYXJhbWV0ZXJzOiBbXSwKICAgICAgY3VycmVudFRhc2s6IG51bGwsCiAgICAgIGV4ZWN1dGVMb2FkaW5nOiBmYWxzZSwKCiAgICAgIC8vIOa3u+WKoOeKtuaAgei/h+a7pAogICAgICBzdGF0dXNGaWx0ZXI6ICdhbGwnLAoKICAgICAgLy8g5Lu75Yqh5p2D6ZmQCiAgICAgIHRhc2tQZXJtaXNzaW9uczoge30sCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICd0YXNrRm9ybS5qZW5raW5zX2pvYl9uYW1lJzogZnVuY3Rpb24obmV3VmFsLCBvbGRWYWwpIHsKICAgICAgaWYgKG5ld1ZhbCAmJiBuZXdWYWwgIT09IG9sZFZhbCkgewogICAgICAgIHRoaXMub25KZW5raW5zSm9iU2VsZWN0ZWQobmV3VmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZpbHRlcmVkVGFza3MoKSB7CiAgICAgIGlmICghdGhpcy5zZWFyY2hRdWVyeSAmJiB0aGlzLnN0YXR1c0ZpbHRlciA9PT0gJ2FsbCcgJiYgdGhpcy52aWV3RmlsdGVyID09PSAnYWxsJykgewogICAgICAgIC8vIOW6lOeUqOWIhumhtQogICAgICAgIGNvbnN0IHN0YXJ0ID0gKHRoaXMuY3VycmVudFBhZ2UgLSAxKSAqIHRoaXMucGFnZVNpemU7CiAgICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyB0aGlzLnBhZ2VTaXplOwogICAgICAgIHJldHVybiB0aGlzLnRhc2tzLnNsaWNlKHN0YXJ0LCBlbmQpOwogICAgICB9CiAgICAgIAogICAgICBsZXQgZmlsdGVyZWQgPSB0aGlzLnRhc2tzOwogICAgICAKICAgICAgLy8g5YWI5oyJ54q25oCB6L+H5rukCiAgICAgIGlmICh0aGlzLnN0YXR1c0ZpbHRlciA9PT0gJ2VuYWJsZWQnKSB7CiAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIodGFzayA9PiB0YXNrLmlzX2VuYWJsZWQpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdHVzRmlsdGVyID09PSAnZGlzYWJsZWQnKSB7CiAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIodGFzayA9PiAhdGFzay5pc19lbmFibGVkKTsKICAgICAgfQogICAgICAKICAgICAgLy8g5oyJ6KeG5Zu+6L+H5rukCiAgICAgIGlmICh0aGlzLnZpZXdGaWx0ZXIgIT09ICdhbGwnKSB7CiAgICAgICAgaWYgKHRoaXMudmlld0ZpbHRlciA9PT0gJ25vbmUnKSB7CiAgICAgICAgICAvLyDov4fmu6TmsqHmnInop4blm77nmoTku7vliqEKICAgICAgICAgIGZpbHRlcmVkID0gZmlsdGVyZWQuZmlsdGVyKHRhc2sgPT4gIXRhc2sudmlld19pZCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIOi/h+a7pOeJueWumuinhuWbvueahOS7u+WKoQogICAgICAgICAgZmlsdGVyZWQgPSBmaWx0ZXJlZC5maWx0ZXIodGFzayA9PiB0YXNrLnZpZXdfaWQgPT09IHRoaXMudmlld0ZpbHRlcik7CiAgICAgICAgfQogICAgICB9CiAgICAgIAogICAgICAvLyDlho3mjInmkJzntKLmnaHku7bov4fmu6QKICAgICAgaWYgKHRoaXMuc2VhcmNoUXVlcnkpIHsKICAgICAgICBjb25zdCBxdWVyeSA9IHRoaXMuc2VhcmNoUXVlcnkudG9Mb3dlckNhc2UoKTsKICAgICAgICBmaWx0ZXJlZCA9IGZpbHRlcmVkLmZpbHRlcih0YXNrID0+IAogICAgICAgICAgdGFzay5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocXVlcnkpIHx8IAogICAgICAgICAgKHRhc2suZGVzY3JpcHRpb24gJiYgdGFzay5kZXNjcmlwdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHF1ZXJ5KSkgfHwKICAgICAgICAgIHRoaXMuZ2V0VGFza1R5cGVMYWJlbCh0YXNrLnRhc2tfdHlwZSkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhxdWVyeSkKICAgICAgICApOwogICAgICB9CiAgICAgIAogICAgICAvLyDkv53lrZjov4fmu6TlkI7nmoTmgLvmlbDph48KICAgICAgdGhpcy50b3RhbEZpbHRlcmVkVGFza3MgPSBmaWx0ZXJlZC5sZW5ndGg7CiAgICAgIAogICAgICAvLyDlupTnlKjliIbpobUKICAgICAgY29uc3Qgc3RhcnQgPSAodGhpcy5jdXJyZW50UGFnZSAtIDEpICogdGhpcy5wYWdlU2l6ZTsKICAgICAgY29uc3QgZW5kID0gc3RhcnQgKyB0aGlzLnBhZ2VTaXplOwogICAgICByZXR1cm4gZmlsdGVyZWQuc2xpY2Uoc3RhcnQsIGVuZCk7CiAgICB9LAogICAgCiAgICAvLyDojrflj5bov4fmu6TlkI7nmoTmgLvku7vliqHmlbAKICAgIHRvdGFsVGFza3NDb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMudG90YWxGaWx0ZXJlZFRhc2tzIHx8IHRoaXMudGFza3MubGVuZ3RoOwogICAgfSwKICAgIGN1cnJlbnRVc2VyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlciB8fCB7fTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWRUYXNrcygpOwogICAgdGhpcy5sb2FkVGFza1Blcm1pc3Npb25zKCk7CiAgICB0aGlzLmxvYWRUYXNrVmlld3MoKTsKICAgIAogICAgLy8g5qOA5p+l5piv5ZCm5pyJ6KeG5Zu+SUTlj4LmlbAKICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeS52aWV3X2lkKSB7CiAgICAgIHRoaXMudmlld0ZpbHRlciA9IHBhcnNlSW50KHRoaXMuJHJvdXRlLnF1ZXJ5LnZpZXdfaWQpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgLy8g5Yqg6L295Lu75Yqh5YiX6KGoCiAgICBhc3luYyBsb2FkVGFza3MoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvdGFza3MnKTsKICAgICAgICB0aGlzLnRhc2tzID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICB0aGlzLnRvdGFsVGFza3MgPSB0aGlzLnRhc2tzLmxlbmd0aDsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliqDovb3ku7vliqHliJfooajlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5re75Yqg5Y+C5pWwCiAgICBhZGRQYXJhbSgpIHsKICAgICAgdGhpcy5qZW5raW5zUGFyYW1zLnB1c2goeyBuYW1lOiAnJywgdmFsdWU6ICcnIH0pOwogICAgfSwKICAgIAogICAgLy8g56e76Zmk5Y+C5pWwCiAgICByZW1vdmVQYXJhbShpbmRleCkgewogICAgICB0aGlzLmplbmtpbnNQYXJhbXMuc3BsaWNlKGluZGV4LCAxKTsKICAgIH0sCiAgICAKICAgIC8vIOWwhuWPguaVsOaVsOe7hOi9rOaNouS4uuWvueixoQogICAgcGFyYW1zVG9PYmplY3QoKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHt9OwogICAgICB0aGlzLmplbmtpbnNQYXJhbXMuZm9yRWFjaChwYXJhbSA9PiB7CiAgICAgICAgaWYgKHBhcmFtLm5hbWUgJiYgcGFyYW0ubmFtZS50cmltKCkpIHsKICAgICAgICAgIHJlc3VsdFtwYXJhbS5uYW1lLnRyaW0oKV0gPSBwYXJhbS52YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIAogICAgLy8g5bCG5Y+C5pWw5a+56LGh6L2s5o2i5Li65pWw57uECiAgICBwYXJhbXNUb0FycmF5KHBhcmFtc09iaikgewogICAgICBjb25zdCByZXN1bHQgPSBbXTsKICAgICAgaWYgKHBhcmFtc09iaiAmJiB0eXBlb2YgcGFyYW1zT2JqID09PSAnb2JqZWN0JykgewogICAgICAgIE9iamVjdC5rZXlzKHBhcmFtc09iaikuZm9yRWFjaChrZXkgPT4gewogICAgICAgICAgcmVzdWx0LnB1c2goewogICAgICAgICAgICBuYW1lOiBrZXksCiAgICAgICAgICAgIHZhbHVlOiBwYXJhbXNPYmpba2V5XQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICAKICAgIC8vIOaYvuekuua3u+WKoOWvueivneahhgogICAgc2hvd0FkZERpYWxvZygpIHsKICAgICAgdGhpcy5pc0VkaXQgPSBmYWxzZTsKICAgICAgdGhpcy5kaWFsb2dUaXRsZSA9ICfmt7vliqDku7vliqEnOwogICAgICB0aGlzLmplbmtpbnNQYXJhbXMgPSBbXTsgLy8g5riF56m65Y+C5pWwCiAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgCiAgICAvLyDnvJbovpHku7vliqEKICAgIGVkaXRUYXNrKHRhc2spIHsKICAgICAgdGhpcy5pc0VkaXQgPSB0cnVlOwogICAgICB0aGlzLmRpYWxvZ1RpdGxlID0gJ+e8lui+keS7u+WKoSc7CiAgICAgIAogICAgICAvLyDlpI3liLbku7vliqHmlbDmja7liLDooajljZUKICAgICAgdGhpcy50YXNrRm9ybSA9IHsKICAgICAgICBpZDogdGFzay5pZCwKICAgICAgICBuYW1lOiB0YXNrLm5hbWUsCiAgICAgICAgdGFza190eXBlOiB0YXNrLnRhc2tfdHlwZSwKICAgICAgICBkZXNjcmlwdGlvbjogdGFzay5kZXNjcmlwdGlvbiB8fCAnJywKICAgICAgICBpc19lbmFibGVkOiB0YXNrLmlzX2VuYWJsZWQsCiAgICAgICAgdmlld19pZDogdGFzay52aWV3X2lkLAogICAgICAgIGplbmtpbnNfdXJsOiB0YXNrLmplbmtpbnNfdXJsIHx8ICcnLAogICAgICAgIGplbmtpbnNfam9iX25hbWU6IHRhc2suamVua2luc19qb2JfbmFtZSB8fCAnJywKICAgICAgICBqZW5raW5zX3VzZXJuYW1lOiB0YXNrLmplbmtpbnNfdXNlcm5hbWUgfHwgJycsCiAgICAgICAgamVua2luc19hcGlfdG9rZW46IHRhc2suamVua2luc19hcGlfdG9rZW4gfHwgJycsCiAgICAgICAgamVua2luc19wYXJhbWV0ZXJzOiB0YXNrLmplbmtpbnNfcGFyYW1ldGVycyB8fCB7fSwKICAgICAgICBzY3JpcHRfdHlwZTogdGFzay5zY3JpcHRfdHlwZSB8fCAnJywKICAgICAgICBzY3JpcHRfY29udGVudDogdGFzay5zY3JpcHRfY29udGVudCB8fCAnJywKICAgICAgICBjb21tYW5kOiB0YXNrLmNvbW1hbmQgfHwgJycKICAgICAgfTsKICAgICAgCiAgICAgIC8vIOWwhuWPguaVsOWvueixoei9rOaNouS4uuaVsOe7hO+8jOeUqOS6jlVJ5bGV56S6CiAgICAgIHRoaXMuamVua2luc1BhcmFtcyA9IHRoaXMucGFyYW1zVG9BcnJheSh0YXNrLmplbmtpbnNfcGFyYW1ldGVycyk7CiAgICAgIAogICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlOwogICAgfSwKICAgIAogICAgLy8g5L+d5a2Y5Lu75YqhCiAgICBzYXZlVGFzaygpIHsKICAgICAgdGhpcy4kcmVmcy50YXNrRm9ybS52YWxpZGF0ZShhc3luYyB2YWxpZCA9PiB7CiAgICAgICAgaWYgKCF2YWxpZCkgcmV0dXJuOwogICAgICAgIAogICAgICAgIC8vIOWkhOeQhkplbmtpbnPlj4LmlbAKICAgICAgICBpZiAodGhpcy50YXNrRm9ybS50YXNrX3R5cGUgPT09ICdqZW5raW5zJykgewogICAgICAgICAgdGhpcy50YXNrRm9ybS5qZW5raW5zX3BhcmFtZXRlcnMgPSB0aGlzLnBhcmFtc1RvT2JqZWN0KCk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSB0cnVlOwogICAgICAgIAogICAgICAgIHRyeSB7CiAgICAgICAgICBsZXQgcmVzcG9uc2U7CiAgICAgICAgICAKICAgICAgICAgIGlmICh0aGlzLmlzRWRpdCkgewogICAgICAgICAgICAvLyDmm7TmlrDku7vliqEKICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wdXQoYC9hcGkvdGFza3MvJHt0aGlzLnRhc2tGb3JtLmlkfWAsIHRoaXMudGFza0Zvcm0pOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g5pu05paw5pys5Zyw5pWw5o2uCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50YXNrcy5maW5kSW5kZXgodCA9PiB0LmlkID09PSB0aGlzLnRhc2tGb3JtLmlkKTsKICAgICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnRhc2tzLCBpbmRleCwgcmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5pu05paw5oiQ5YqfJyk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDliJvlu7rku7vliqEKICAgICAgICAgICAgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5wb3N0KCcvYXBpL3Rhc2tzJywgdGhpcy50YXNrRm9ybSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDmt7vliqDliLDmnKzlnLDmlbDmja4KICAgICAgICAgICAgdGhpcy50YXNrcy5wdXNoKHJlc3BvbnNlLmRhdGEpOwogICAgICAgICAgICB0aGlzLnRvdGFsVGFza3MgPSB0aGlzLnRhc2tzLmxlbmd0aDsKICAgICAgICAgICAgCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5Yib5bu65oiQ5YqfJyk7CiAgICAgICAgICB9CiAgICAgICAgICAKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zYXZlTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfkv53lrZjku7vliqHlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICAgIHRoaXMuc2F2ZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIAogICAgLy8g6YeN572u6KGo5Y2VCiAgICByZXNldEZvcm0oKSB7CiAgICAgIGlmICh0aGlzLiRyZWZzLnRhc2tGb3JtKSB7CiAgICAgICAgdGhpcy4kcmVmcy50YXNrRm9ybS5yZXNldEZpZWxkcygpOwogICAgICB9CiAgICAgIAogICAgICB0aGlzLnRhc2tGb3JtID0gewogICAgICAgIG5hbWU6ICcnLAogICAgICAgIHRhc2tfdHlwZTogJ2plbmtpbnMnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBpc19lbmFibGVkOiB0cnVlLAogICAgICAgIHZpZXdfaWQ6IG51bGwsCiAgICAgICAgamVua2luc191cmw6ICcnLAogICAgICAgIGplbmtpbnNfam9iX25hbWU6ICcnLAogICAgICAgIGplbmtpbnNfdXNlcm5hbWU6ICcnLAogICAgICAgIGplbmtpbnNfYXBpX3Rva2VuOiAnJywKICAgICAgICBqZW5raW5zX3BhcmFtZXRlcnM6IHt9LAogICAgICAgIHNjcmlwdF90eXBlOiAnJywKICAgICAgICBzY3JpcHRfY29udGVudDogJycsCiAgICAgICAgY29tbWFuZDogJycKICAgICAgfTsKICAgICAgCiAgICAgIHRoaXMuamVua2luc1BhcmFtcyA9IFtdOwogICAgICB0aGlzLmplbmtpbnNKb2JzID0gW107CiAgICB9LAogICAgCiAgICAvLyDnoa7orqTliKDpmaQKICAgIGNvbmZpcm1EZWxldGUodGFzaykgewogICAgICB0aGlzLnRhc2tUb0RlbGV0ZSA9IHRhc2s7CiAgICAgIHRoaXMuZGVsZXRlRGlhbG9nVmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgCiAgICAvLyDliKDpmaTku7vliqEKICAgIGFzeW5jIGRlbGV0ZVRhc2soKSB7CiAgICAgIGlmICghdGhpcy50YXNrVG9EZWxldGUpIHJldHVybjsKICAgICAgCiAgICAgIHRoaXMuZGVsZXRlTG9hZGluZyA9IHRydWU7CiAgICAgIAogICAgICB0cnkgewogICAgICAgIGF3YWl0IGF4aW9zLmRlbGV0ZShgL2FwaS90YXNrcy8ke3RoaXMudGFza1RvRGVsZXRlLmlkfWApOwogICAgICAgIAogICAgICAgIC8vIOS7juacrOWcsOaVsOaNruS4reenu+mZpAogICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy50YXNrcy5maW5kSW5kZXgodCA9PiB0LmlkID09PSB0aGlzLnRhc2tUb0RlbGV0ZS5pZCk7CiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgdGhpcy50YXNrcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgdGhpcy50b3RhbFRhc2tzID0gdGhpcy50YXNrcy5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5Yig6Zmk5oiQ5YqfJyk7CiAgICAgICAgdGhpcy5kZWxldGVEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgdGhpcy5kZWxldGVMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5Yig6Zmk5Lu75Yqh5aSx6LSlOiAnICsgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciB8fCBlcnJvci5tZXNzYWdlKSk7CiAgICAgICAgdGhpcy5kZWxldGVMb2FkaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOaJp+ihjOS7u+WKoQogICAgYXN5bmMgZXhlY3V0ZVRhc2sodGFzaykgewogICAgICB0aGlzLmN1cnJlbnRUYXNrID0gdGFzazsKICAgICAgCiAgICAgIGlmICh0YXNrLnRhc2tfdHlwZSA9PT0gJ2plbmtpbnMnKSB7CiAgICAgICAgLy8g6I635Y+W5Lu75Yqh5Y+C5pWwCiAgICAgICAgdHJ5IHsKICAgICAgICAgIHRoaXMuZXhlY3V0ZUxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgCiAgICAgICAgICAvLyDojrflj5ZKZW5raW5z5Lu75Yqh5Y+C5pWwCiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHVybDogdGFzay5qZW5raW5zX3VybCwKICAgICAgICAgICAgdXNlcm5hbWU6IHRhc2suamVua2luc191c2VybmFtZSB8fCAnJywKICAgICAgICAgICAgYXBpX3Rva2VuOiB0YXNrLmplbmtpbnNfYXBpX3Rva2VuIHx8ICcnLAogICAgICAgICAgICBqb2JfbmFtZTogdGFzay5qZW5raW5zX2pvYl9uYW1lCiAgICAgICAgICB9OwogICAgICAgICAgCiAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9qZW5raW5zL2pvYi9wYXJhbWV0ZXJzJywgeyBwYXJhbXMgfSk7CiAgICAgICAgICAKICAgICAgICAgIC8vIOWkhOeQhuWTjeW6lAogICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgICB0aGlzLmpvYlBhcmFtZXRlcnMgPSByZXNwb25zZS5kYXRhOwogICAgICAgICAgICAKICAgICAgICAgICAgLy8g5YeG5aSH5omn6KGM5Y+C5pWw77yM5L2/55So5Lu75Yqh6buY6K6k5Y+C5pWwCiAgICAgICAgICAgIHRoaXMuZXhlY3V0aW9uUGFyYW1zID0gW107CiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRQYXJhbXMgPSB0YXNrLmplbmtpbnNfcGFyYW1ldGVycyB8fCB7fTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIOWwhuS7u+WKoeWPguaVsOS4jum7mOiupOWAvOWQiOW5tgogICAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2gocGFyYW0gPT4gewogICAgICAgICAgICAgIHRoaXMuZXhlY3V0aW9uUGFyYW1zLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogcGFyYW0ubmFtZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBkZWZhdWx0UGFyYW1zW3BhcmFtLm5hbWVdIHx8IHBhcmFtLmRlZmF1bHRfdmFsdWUgfHwgJycsCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogcGFyYW0uZGVzY3JpcHRpb24gfHwgJycsCiAgICAgICAgICAgICAgICB0eXBlOiBwYXJhbS50eXBlIHx8ICdzdHJpbmcnLAogICAgICAgICAgICAgICAgY2hvaWNlczogcGFyYW0uY2hvaWNlcyB8fCBbXSAvLyDmt7vliqDpgInpobnmlbDnu4QKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyDmmL7npLrlj4LmlbDlr7nor53moYYKICAgICAgICAgICAgdGhpcy5wYXJhbXNEaWFsb2dWaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5leGVjdXRlTG9hZGluZyA9IGZhbHNlOyAvLyDph43opoHvvJrlnKjmmL7npLrlr7nor53moYbml7bph43nva5sb2FkaW5n54q25oCBCiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyDmsqHmnInlj4LmlbDvvIznm7TmjqXmiafooYwKICAgICAgICAgICAgdGhpcy5jb25maXJtRXhlY3V0ZSgpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCfojrflj5bku7vliqHlj4LmlbDlpLHotKU6JywgZXJyb3IpOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6I635Y+W5Lu75Yqh5Y+C5pWw5aSx6LSlOiAnICsgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLmRhdGEgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvciB8fCBlcnJvci5tZXNzYWdlKSk7CiAgICAgICAgICB0aGlzLmV4ZWN1dGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIOmdnkplbmtpbnPku7vliqHvvIznm7TmjqXmiafooYwKICAgICAgICB0aGlzLmNvbmZpcm1FeGVjdXRlKCk7CiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOWPlua2iOaJp+ihjAogICAgY2FuY2VsRXhlY3V0ZSgpIHsKICAgICAgdGhpcy5wYXJhbXNEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgIHRoaXMuZXhlY3V0ZUxvYWRpbmcgPSBmYWxzZTsKICAgICAgdGhpcy5leGVjdXRpb25QYXJhbXMgPSBbXTsKICAgICAgdGhpcy5jdXJyZW50VGFzayA9IG51bGw7CiAgICB9LAogICAgCiAgICAvLyDnoa7orqTmiafooYwKICAgIGFzeW5jIGNvbmZpcm1FeGVjdXRlKCkgewogICAgICBpZiAoIXRoaXMuY3VycmVudFRhc2spIHJldHVybjsKICAgICAgCiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5leGVjdXRlTG9hZGluZyA9IHRydWU7CiAgICAgICAgCiAgICAgICAgLy8g5p6E5bu65Y+C5pWwCiAgICAgICAgY29uc3QgcGFyYW1ldGVycyA9IHt9OwogICAgICAgIGlmICh0aGlzLmV4ZWN1dGlvblBhcmFtcy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLmV4ZWN1dGlvblBhcmFtcy5mb3JFYWNoKHBhcmFtID0+IHsKICAgICAgICAgICAgcGFyYW1ldGVyc1twYXJhbS5uYW1lXSA9IHBhcmFtLnZhbHVlOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIOWPkemAgeaJp+ihjOivt+axggogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MucG9zdChgL2FwaS90YXNrcy8ke3RoaXMuY3VycmVudFRhc2suaWR9L2V4ZWN1dGVgLCAKICAgICAgICAgIHsgcGFyYW1ldGVyczogT2JqZWN0LmtleXMocGFyYW1ldGVycykubGVuZ3RoID4gMCA/IHBhcmFtZXRlcnMgOiB1bmRlZmluZWQgfSwgCiAgICAgICAgICB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICApOwogICAgICAgIAogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygn5Lu75Yqh5bey5o+Q5Lqk5omn6KGMJyk7CiAgICAgICAgCiAgICAgICAgLy8g5YWz6Zet5a+56K+d5qGGCiAgICAgICAgdGhpcy5wYXJhbXNEaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgCiAgICAgICAgLy8g6Lez6L2s5Yiw5omn6KGM6K+m5oOF6aG1CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9zeXN0ZW0vdGFzay1leGVjdXRpb24vJHtyZXNwb25zZS5kYXRhLmV4ZWN1dGlvbl9pZH1gKTsKICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmiafooYzku7vliqHlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICB0aGlzLmV4ZWN1dGVMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy5jdXJyZW50VGFzayA9IG51bGw7CiAgICAgIH0KICAgIH0sCiAgICAKICAgIC8vIOWKoOi9vUplbmtpbnPku7vliqEKICAgIGFzeW5jIGxvYWRKZW5raW5zSm9icygpIHsKICAgICAgaWYgKCF0aGlzLnRhc2tGb3JtLmplbmtpbnNfdXJsKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7flhYjovpPlhaVKZW5raW5zIFVSTCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICAKICAgICAgdHJ5IHsKICAgICAgICB0aGlzLmxvYWRpbmdKZW5raW5zSm9icyA9IHRydWU7CiAgICAgICAgCiAgICAgICAgLy8g5p6E5bu66K+35rGC5Y+C5pWwCiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgdXJsOiB0aGlzLnRhc2tGb3JtLmplbmtpbnNfdXJsLAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudGFza0Zvcm0uamVua2luc191c2VybmFtZSB8fCAnJywKICAgICAgICAgIGFwaV90b2tlbjogdGhpcy50YXNrRm9ybS5qZW5raW5zX2FwaV90b2tlbiB8fCAnJwogICAgICAgIH07CiAgICAgICAgCiAgICAgICAgLy8g5Y+R6YCB6K+35rGCCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoJy9hcGkvamVua2lucy9qb2JzJywgeyBwYXJhbXMgfSk7CiAgICAgICAgCiAgICAgICAgLy8g5aSE55CG5ZON5bqUCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgdGhpcy5qZW5raW5zSm9icyA9IHJlc3BvbnNlLmRhdGEubWFwKGpvYiA9PiAoewogICAgICAgICAgICBuYW1lOiBqb2IubmFtZSwKICAgICAgICAgICAgdXJsOiBqb2IudXJsLAogICAgICAgICAgICBmb2xkZXI6IGpvYi5mb2xkZXIgLy8g5re75YqgZm9sZGVy5bGe5oCnCiAgICAgICAgICB9KSk7CiAgICAgICAgICAKICAgICAgICAgIGlmICh0aGlzLmplbmtpbnNKb2JzLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+acquaJvuWIsOS7u+S9lUplbmtpbnPku7vliqEnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfojrflj5ZKZW5raW5z5Lu75Yqh5YiX6KGo5qC85byP5LiN5q2j56GuJyk7CiAgICAgICAgICB0aGlzLmplbmtpbnNKb2JzID0gW107CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9vUplbmtpbnPku7vliqHlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9vUplbmtpbnPku7vliqHlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICB0aGlzLmplbmtpbnNKb2JzID0gW107CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgdGhpcy5sb2FkaW5nSmVua2luc0pvYnMgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5b2T6YCJ5oupSmVua2luc+S7u+WKoeWQjuWKoOi9veS7u+WKoeWPguaVsAogICAgYXN5bmMgb25KZW5raW5zSm9iU2VsZWN0ZWQoam9iTmFtZSkgewogICAgICBpZiAoIWpvYk5hbWUpIHJldHVybjsKICAgICAgCiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5sb2FkaW5nSm9iUGFyYW1ldGVycyA9IHRydWU7CiAgICAgICAgCiAgICAgICAgLy8g5p6E5bu66K+35rGC5Y+C5pWwCiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgdXJsOiB0aGlzLnRhc2tGb3JtLmplbmtpbnNfdXJsLAogICAgICAgICAgdXNlcm5hbWU6IHRoaXMudGFza0Zvcm0uamVua2luc191c2VybmFtZSB8fCAnJywKICAgICAgICAgIGFwaV90b2tlbjogdGhpcy50YXNrRm9ybS5qZW5raW5zX2FwaV90b2tlbiB8fCAnJywKICAgICAgICAgIGpvYl9uYW1lOiBqb2JOYW1lCiAgICAgICAgfTsKICAgICAgICAKICAgICAgICAvLyDlj5HpgIHor7fmsYIKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS9qZW5raW5zL2pvYi9wYXJhbWV0ZXJzJywgeyBwYXJhbXMgfSk7CiAgICAgICAgCiAgICAgICAgLy8g5aSE55CG5ZON5bqUCiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5kYXRhKSkgewogICAgICAgICAgLy8g5riF56m6546w5pyJ5Y+C5pWwCiAgICAgICAgICB0aGlzLmplbmtpbnNQYXJhbXMgPSBbXTsKICAgICAgICAgIAogICAgICAgICAgLy8g5aaC5p6c5pyJ5Y+C5pWw77yM5re75Yqg5Yiw5Y+C5pWw5YiX6KGoCiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHJlc3BvbnNlLmRhdGEuZm9yRWFjaChwYXJhbSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5qZW5raW5zUGFyYW1zLnB1c2goewogICAgICAgICAgICAgICAgbmFtZTogcGFyYW0ubmFtZSwKICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJhbS5kZWZhdWx0X3ZhbHVlIHx8ICcnCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDmiJDlip/ojrflj5bliLAgJHtyZXNwb25zZS5kYXRhLmxlbmd0aH0g5Liq5Lu75Yqh5Y+C5pWwYCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ+WKoOi9vUplbmtpbnPku7vliqHlj4LmlbDlpLHotKU6JywgZXJyb3IpOwogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+WKoOi9veS7u+WKoeWPguaVsOWksei0pTogJyArIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhICYmIGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3IgfHwgZXJyb3IubWVzc2FnZSkpOwogICAgICB9IGZpbmFsbHkgewogICAgICAgIHRoaXMubG9hZGluZ0pvYlBhcmFtZXRlcnMgPSBmYWxzZTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5aSE55CG5Lu75Yqh54q25oCB5Y+Y5pu0CiAgICBhc3luYyBoYW5kbGVTdGF0dXNDaGFuZ2UodGFzaykgewogICAgICB0cnkgewogICAgICAgIGF3YWl0IGF4aW9zLnB1dChgL2FwaS90YXNrcy8ke3Rhc2suaWR9YCwgewogICAgICAgICAgaXNfZW5hYmxlZDogdGFzay5pc19lbmFibGVkCiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKGDku7vliqHlt7Ike3Rhc2suaXNfZW5hYmxlZCA/ICflkK/nlKgnIDogJ+emgeeUqCd9YCk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgLy8g5oGi5aSN5Y6f54q25oCBCiAgICAgICAgdGFzay5pc19lbmFibGVkID0gIXRhc2suaXNfZW5hYmxlZDsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfmm7TmlrDku7vliqHnirbmgIHlpLHotKU6ICcgKyAoZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YSAmJiBlcnJvci5yZXNwb25zZS5kYXRhLmVycm9yIHx8IGVycm9yLm1lc3NhZ2UpKTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5YiG6aG155u45YWz5pa55rOVCiAgICBoYW5kbGVTaXplQ2hhbmdlKHZhbCkgewogICAgICB0aGlzLnBhZ2VTaXplID0gdmFsOwogICAgICAvLyDph43nva7kuLrnrKzkuIDpobUKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IDE7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHZhbDsKICAgIH0sCiAgICAKICAgIC8vIOagvOW8j+WMluaXpeacnwogICAgZm9ybWF0RGF0ZShkYXRlU3RyaW5nKSB7CiAgICAgIGlmICghZGF0ZVN0cmluZykgcmV0dXJuICcnOwogICAgICAKICAgICAgLy8g5Yib5bu65pel5pyf5a+56LGhCiAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShkYXRlU3RyaW5nKTsKICAgICAgCiAgICAgIC8vIOiOt+WPllVUQ+aXtumXtOW5tua3u+WKoDjlsI/ml7bvvIjkuJzlhavljLrvvIkKICAgICAgY29uc3QgdXRjVGltZSA9IGRhdGUuZ2V0VGltZSgpOwogICAgICBjb25zdCBiZWlqaW5nVGltZSA9IG5ldyBEYXRlKHV0Y1RpbWUgKyA4ICogNjAgKiA2MCAqIDEwMDApOwogICAgICAKICAgICAgLy8g5qC85byP5YyW5Li65pys5Zyw5pe26Ze05a2X56ym5LiyCiAgICAgIHJldHVybiBiZWlqaW5nVGltZS50b0xvY2FsZVN0cmluZygnemgtQ04nLCB7CiAgICAgICAgeWVhcjogJ251bWVyaWMnLAogICAgICAgIG1vbnRoOiAnMi1kaWdpdCcsCiAgICAgICAgZGF5OiAnMi1kaWdpdCcsCiAgICAgICAgaG91cjogJzItZGlnaXQnLAogICAgICAgIG1pbnV0ZTogJzItZGlnaXQnLAogICAgICAgIHNlY29uZDogJzItZGlnaXQnLAogICAgICAgIGhvdXIxMjogZmFsc2UKICAgICAgfSk7CiAgICB9LAogICAgCiAgICAvLyDojrflj5bku7vliqHnsbvlnovmoIfnrb4KICAgIGdldFRhc2tUeXBlTGFiZWwodHlwZSkgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnamVua2lucyc6ICdKZW5raW5z5Lu75YqhJywKICAgICAgICAnc2NyaXB0JzogJ+iEmuacrOS7u+WKoScsCiAgICAgICAgJ2NvbW1hbmQnOiAn5ZG95Luk5Lu75YqhJwogICAgICB9OwogICAgICByZXR1cm4gdHlwZXNbdHlwZV0gfHwgdHlwZTsKICAgIH0sCiAgICAKICAgIC8vIOiOt+WPluS7u+WKoeexu+Wei+agh+etvuagt+W8jwogICAgZ2V0VGFza1R5cGVUYWcodHlwZSkgewogICAgICBjb25zdCB0eXBlcyA9IHsKICAgICAgICAnamVua2lucyc6ICdwcmltYXJ5JywKICAgICAgICAnc2NyaXB0JzogJ3N1Y2Nlc3MnLAogICAgICAgICdjb21tYW5kJzogJ3dhcm5pbmcnCiAgICAgIH07CiAgICAgIHJldHVybiB0eXBlc1t0eXBlXSB8fCAnJzsKICAgIH0sCiAgICAKICAgIC8vIOWKoOi9veS7u+WKoeadg+mZkAogICAgYXN5bmMgbG9hZFRhc2tQZXJtaXNzaW9ucygpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnL2FwaS90YXNrcy9wZXJtaXNzaW9ucycpOwogICAgICAgIAogICAgICAgIC8vIOWwhuadg+mZkOaVsOaNrui9rOaNouS4uuS7peS7u+WKoUlE5Li66ZSu55qE5a+56LGhCiAgICAgICAgY29uc3QgcGVybWlzc2lvbnMgPSB7fTsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YSAmJiBBcnJheS5pc0FycmF5KHJlc3BvbnNlLmRhdGEpKSB7CiAgICAgICAgICByZXNwb25zZS5kYXRhLmZvckVhY2gocGVybSA9PiB7CiAgICAgICAgICAgIHBlcm1pc3Npb25zW3Blcm0udGFza19pZF0gPSB7CiAgICAgICAgICAgICAgY2FuX3ZpZXc6IHBlcm0uY2FuX3ZpZXcsCiAgICAgICAgICAgICAgY2FuX2V4ZWN1dGU6IHBlcm0uY2FuX2V4ZWN1dGUsCiAgICAgICAgICAgICAgY2FuX3Rlcm1pbmF0ZTogcGVybS5jYW5fdGVybWluYXRlLAogICAgICAgICAgICAgIGNhbl9kZWxldGU6IHBlcm0uY2FuX2RlbGV0ZQogICAgICAgICAgICB9OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIHRoaXMudGFza1Blcm1pc3Npb25zID0gcGVybWlzc2lvbnM7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295Lu75Yqh5p2D6ZmQ5aSx6LSlOicsIGVycm9yKTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5Yqg6L295Lu75Yqh6KeG5Zu+CiAgICBhc3luYyBsb2FkVGFza1ZpZXdzKCkgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KCcvYXBpL3Rhc2stdmlld3MnKTsKICAgICAgICB0aGlzLnRhc2tWaWV3cyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcign5Yqg6L295Lu75Yqh6KeG5Zu+5aSx6LSlOicsIGVycm9yKTsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfliqDovb3ku7vliqHop4blm77lpLHotKUnKTsKICAgICAgfQogICAgfSwKICAgIAogICAgLy8g5qC55o2u6KeG5Zu+SUTojrflj5bop4blm77lkI3np7AKICAgIGdldFZpZXdOYW1lKHZpZXdJZCkgewogICAgICBjb25zdCB2aWV3ID0gdGhpcy50YXNrVmlld3MuZmluZCh2ID0+IHYuaWQgPT09IHZpZXdJZCk7CiAgICAgIHJldHVybiB2aWV3ID8gdmlldy5uYW1lIDogJ+acquefpeinhuWbvic7CiAgICB9LAogICAgCiAgICAvLyDliKTmlq3mmK/lkKblj6/ku6Xmn6XnnIvku7vliqEKICAgIGNhblZpZXcodGFzaykgewogICAgICAvLyDnrqHnkIblkZjmiJbku7vliqHliJvlu7rogIXlj6/ku6Xmn6XnnIsKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIuaXNfYWRtaW4gfHwgdGFzay51c2VyX2lkID09PSB0aGlzLmN1cnJlbnRVc2VyLmlkKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgCiAgICAgIC8vIOajgOafpeaYr+WQpuacieafpeeci+adg+mZkAogICAgICBjb25zdCBwZXJtID0gdGhpcy50YXNrUGVybWlzc2lvbnNbdGFzay5pZF07CiAgICAgIHJldHVybiBwZXJtICYmIHBlcm0uY2FuX3ZpZXc7CiAgICB9LAogICAgCiAgICAvLyDliKTmlq3mmK/lkKblj6/ku6XnvJbovpHku7vliqEKICAgIGNhbkVkaXQodGFzaykgewogICAgICAvLyDlj6rmnInnrqHnkIblkZjmiJbku7vliqHliJvlu7rogIXlj6/ku6XnvJbovpEKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudFVzZXIuaXNfYWRtaW4gfHwgdGFzay51c2VyX2lkID09PSB0aGlzLmN1cnJlbnRVc2VyLmlkOwogICAgfSwKICAgIAogICAgLy8g5Yik5pat5piv5ZCm5Y+v5Lul5omn6KGM5Lu75YqhCiAgICBjYW5FeGVjdXRlKHRhc2spIHsKICAgICAgLy8g566h55CG5ZGY5oiW5Lu75Yqh5Yib5bu66ICF5Y+v5Lul5omn6KGMCiAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyLmlzX2FkbWluIHx8IHRhc2sudXNlcl9pZCA9PT0gdGhpcy5jdXJyZW50VXNlci5pZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIAogICAgICAvLyDmo4Dmn6XmmK/lkKbmnInmiafooYzmnYPpmZAKICAgICAgY29uc3QgcGVybSA9IHRoaXMudGFza1Blcm1pc3Npb25zW3Rhc2suaWRdOwogICAgICByZXR1cm4gcGVybSAmJiBwZXJtLmNhbl9leGVjdXRlOwogICAgfSwKICAgIAogICAgLy8g5Yik5pat5piv5ZCm5Y+v5Lul5Yig6Zmk5Lu75YqhCiAgICBjYW5EZWxldGUodGFzaykgewogICAgICAvLyDnrqHnkIblkZjlj6/ku6XliKDpmaTku7vkvZXku7vliqEKICAgICAgaWYgKHRoaXMuY3VycmVudFVzZXIuaXNfYWRtaW4pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAKICAgICAgLy8g5Lu75Yqh5Yib5bu66ICF5Y+v5Lul5Yig6Zmk6Ieq5bex55qE5Lu75YqhCiAgICAgIGlmICh0YXNrLnVzZXJfaWQgPT09IHRoaXMuY3VycmVudFVzZXIuaWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICAKICAgICAgLy8g5qOA5p+l5piv5ZCm5pyJ5Yig6Zmk5p2D6ZmQCiAgICAgIGNvbnN0IHBlcm0gPSB0aGlzLnRhc2tQZXJtaXNzaW9uc1t0YXNrLmlkXTsKICAgICAgcmV0dXJuIHBlcm0gJiYgcGVybS5jYW5fZGVsZXRlOwogICAgfSwKICAgIAogICAgLy8g6KGo5qC86KGM5qC35byPCiAgICB0YWJsZVJvd0NsYXNzTmFtZSh7IHJvdywgcm93SW5kZXggfSkgewogICAgICBpZiAocm93LmlzX2VuYWJsZWQpIHsKICAgICAgICByZXR1cm4gJ2VuYWJsZWQtcm93JzsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gJ2Rpc2FibGVkLXJvdyc7CiAgICAgIH0KICAgIH0sCgogICAgLy8g5aSE55CG6L+H5ruk5Zmo5Y+Y5YyWCiAgICBoYW5kbGVGaWx0ZXJDaGFuZ2UoKSB7CiAgICAgIC8vIOmHjee9ruS4uuesrOS4gOmhtQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gMTsKICAgICAgY29uc29sZS5sb2coJ+i/h+a7pOadoeS7tuWPmOabtCcpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["TaskManager.vue"],"names":[],"mappings":";AA2YA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TaskManager.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"task-manager\">\n    <div class=\"page-header\">\n      <div class=\"header-left\">\n        <h2 class=\"page-title\">任务管理</h2>\n        <div class=\"page-description\">管理和执行自动化任务，包括Jenkins任务</div>\n      </div>\n      <div class=\"header-right\" v-if=\"currentUser.is_admin\">\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"showAddDialog\">添加任务</el-button>\n      </div>\n    </div>\n\n    <!-- 工具栏 -->\n    <div class=\"actions-toolbar\">\n      <div class=\"toolbar-left\">\n        <el-radio-group v-model=\"statusFilter\" size=\"small\" @change=\"handleFilterChange\">\n          <el-radio-button label=\"all\">全部</el-radio-button>\n          <el-radio-button label=\"enabled\">已启用</el-radio-button>\n          <el-radio-button label=\"disabled\">已禁用</el-radio-button>\n        </el-radio-group>\n        \n        <el-select \n          v-model=\"viewFilter\" \n          placeholder=\"选择视图\" \n          size=\"small\" \n          @change=\"handleFilterChange\"\n          clearable\n          class=\"view-filter\"\n        >\n          <el-option label=\"全部视图\" value=\"all\"></el-option>\n          <el-option label=\"未分类\" value=\"none\"></el-option>\n          <el-option\n            v-for=\"view in taskViews\"\n            :key=\"view.id\"\n            :label=\"view.name\"\n            :value=\"view.id\"\n          ></el-option>\n        </el-select>\n        \n        <el-button \n          type=\"text\" \n          icon=\"el-icon-s-operation\" \n          @click=\"$router.push('/system/task-views')\"\n          class=\"manage-views-btn\"\n        >\n          管理视图\n        </el-button>\n      </div>\n      <div class=\"toolbar-right\">\n        <el-input\n          placeholder=\"搜索任务\"\n          v-model=\"searchQuery\"\n          class=\"search-input\"\n          prefix-icon=\"el-icon-search\"\n          clearable\n          size=\"small\"\n        ></el-input>\n      </div>\n    </div>\n    \n    <!-- 任务列表 -->\n    <el-table\n      :data=\"filteredTasks\"\n      style=\"width: 100%\"\n      v-loading=\"loading\"\n      border\n      stripe\n      :default-sort=\"{prop: 'updated_at', order: 'descending'}\"\n      :row-class-name=\"tableRowClassName\"\n      highlight-current-row\n    >\n      <el-table-column prop=\"name\" label=\"任务名称\" min-width=\"110\">\n        <template slot-scope=\"scope\">\n          <router-link :to=\"`/system/task-detail/${scope.row.id}`\" class=\"task-name-link\">\n            {{ scope.row.name }}\n          </router-link>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"view_id\" label=\"所属视图\" width=\"180\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.view_id\" type=\"success\" size=\"medium\">\n            {{ getViewName(scope.row.view_id) }}\n          </el-tag>\n          <span v-else class=\"no-data-text\">未分类</span>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"task_type\" label=\"类型\" width=\"120\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getTaskTypeTag(scope.row.task_type)\" size=\"medium\">\n            {{ getTaskTypeLabel(scope.row.task_type) }}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"description\" label=\"描述\" min-width=\"180\">\n        <template slot-scope=\"scope\">\n          <span class=\"description-text\">{{ scope.row.description || '无描述' }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"状态\" width=\"80\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-switch\n            v-model=\"scope.row.is_enabled\"\n            active-color=\"#13ce66\"\n            inactive-color=\"#ff4949\"\n            :disabled=\"!canEdit(scope.row)\"\n            @change=\"handleStatusChange(scope.row)\"\n          ></el-switch>\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"updated_at\" label=\"更新时间\" width=\"160\" sortable align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ formatDate(scope.row.updated_at) }}\n        </template>\n      </el-table-column>\n      <el-table-column prop=\"last_success_time\" label=\"上次成功时间\" width=\"160\" sortable align=\"center\">\n        <template slot-scope=\"scope\">\n          <span v-if=\"scope.row.last_success_time\">{{ formatDate(scope.row.last_success_time) }}</span>\n          <span v-else class=\"no-data-text\">暂无成功记录</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"180\" fixed=\"right\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <div class=\"action-buttons\">\n            <!-- 查看详情按钮 - 所有人可见 -->\n            <el-tooltip content=\"查看详情\" placement=\"top\">\n              <el-button\n                size=\"mini\"\n                type=\"info\"\n                icon=\"el-icon-view\"\n                circle\n                @click=\"$router.push(`/system/task-detail/${scope.row.id}`)\"\n              ></el-button>\n            </el-tooltip>\n            \n            <!-- 执行任务按钮 - 需要执行权限 -->\n            <el-tooltip content=\"执行任务\" placement=\"top\" :disabled=\"!canExecute(scope.row) || !scope.row.is_enabled\">\n              <el-button\n                size=\"mini\"\n                type=\"primary\"\n                icon=\"el-icon-video-play\"\n                circle\n                @click=\"executeTask(scope.row)\"\n                :disabled=\"!canExecute(scope.row) || !scope.row.is_enabled\"\n                v-if=\"canExecute(scope.row)\"\n              ></el-button>\n            </el-tooltip>\n            \n            <!-- 编辑任务按钮 - 需要编辑权限 -->\n            <el-tooltip content=\"编辑任务\" placement=\"top\" v-if=\"canEdit(scope.row)\">\n              <el-button\n                size=\"mini\"\n                type=\"warning\"\n                icon=\"el-icon-edit\"\n                circle\n                @click=\"editTask(scope.row)\"\n              ></el-button>\n            </el-tooltip>\n            \n            <!-- 删除任务按钮 - 需要删除权限 -->\n            <el-tooltip content=\"删除任务\" placement=\"top\" v-if=\"canDelete(scope.row)\">\n              <el-button\n                size=\"mini\"\n                type=\"danger\"\n                icon=\"el-icon-delete\"\n                circle\n                @click=\"confirmDelete(scope.row)\"\n              ></el-button>\n            </el-tooltip>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    \n    <!-- 分页 -->\n    <div class=\"pagination-container\">\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[10, 20, 50, 100]\"\n        :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\"\n        :total=\"totalTasksCount\"\n        background\n      ></el-pagination>\n    </div>\n    \n    <!-- 添加/编辑任务对话框 -->\n    <el-dialog\n      :title=\"dialogTitle\"\n      :visible.sync=\"dialogVisible\"\n      width=\"50%\"\n      @closed=\"resetForm\"\n    >\n      <el-form :model=\"taskForm\" :rules=\"formRules\" ref=\"taskForm\" label-width=\"100px\">\n        <el-form-item label=\"任务名称\" prop=\"name\">\n          <el-input v-model=\"taskForm.name\" placeholder=\"请输入任务名称\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"任务类型\" prop=\"task_type\">\n          <el-select v-model=\"taskForm.task_type\" placeholder=\"请选择任务类型\" style=\"width: 100%\">\n            <el-option label=\"Jenkins任务\" value=\"jenkins\"></el-option>\n            <el-option label=\"脚本任务\" value=\"script\"></el-option>\n            <el-option label=\"命令任务\" value=\"command\"></el-option>\n          </el-select>\n        </el-form-item>\n        <el-form-item label=\"描述\">\n          <el-input type=\"textarea\" v-model=\"taskForm.description\" placeholder=\"请输入任务描述\"></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"所属视图\">\n          <el-select v-model=\"taskForm.view_id\" placeholder=\"选择视图\" clearable style=\"width: 100%\">\n            <el-option label=\"无视图\" :value=\"null\"></el-option>\n            <el-option\n              v-for=\"view in taskViews\"\n              :key=\"view.id\"\n              :label=\"view.name\"\n              :value=\"view.id\"\n            ></el-option>\n          </el-select>\n        </el-form-item>\n        \n        <!-- Jenkins任务特有字段 -->\n        <template v-if=\"taskForm.task_type === 'jenkins'\">\n          <el-form-item label=\"Jenkins URL\" prop=\"jenkins_url\">\n            <el-input v-model=\"taskForm.jenkins_url\" placeholder=\"例如: http://jenkins.example.com:8080\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"任务名称\" prop=\"jenkins_job_name\">\n            <el-input v-model=\"taskForm.jenkins_job_name\" placeholder=\"Jenkins任务名称\">\n              <el-button slot=\"append\" @click=\"loadJenkinsJobs\" :loading=\"loadingJenkinsJobs\">\n                <i class=\"el-icon-refresh\"></i> 获取任务\n              </el-button>\n            </el-input>\n            <el-select \n              v-if=\"jenkinsJobs.length > 0\" \n              v-model=\"taskForm.jenkins_job_name\" \n              placeholder=\"选择Jenkins任务\" \n              style=\"width: 100%; margin-top: 5px;\"\n              filterable\n              @change=\"onJenkinsJobSelected\"\n            >\n              <el-option \n                v-for=\"job in jenkinsJobs\" \n                :key=\"job.name\" \n                :label=\"job.name\" \n                :value=\"job.name\"\n              >\n                <!-- 显示嵌套文件夹结构 -->\n                <div v-if=\"job.folder\" class=\"nested-job\">\n                  <span class=\"folder-name\">{{ job.folder }}</span>\n                  <i class=\"el-icon-arrow-right folder-separator\"></i>\n                  <span class=\"job-name\">{{ job.name.split('/').pop() }}</span>\n                </div>\n                <span v-else>{{ job.name }}</span>\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"用户名\" prop=\"jenkins_username\">\n            <el-input v-model=\"taskForm.jenkins_username\" placeholder=\"Jenkins用户名\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"API Token\" prop=\"jenkins_api_token\">\n            <el-input v-model=\"taskForm.jenkins_api_token\" placeholder=\"Jenkins API Token\" show-password></el-input>\n          </el-form-item>\n          \n          <!-- Jenkins参数设置 -->\n          <el-form-item label=\"任务参数\">\n            <div class=\"jenkins-params\">\n              <div v-for=\"(param, index) in jenkinsParams\" :key=\"index\" class=\"param-item\">\n                <el-input v-model=\"param.name\" placeholder=\"参数名\" class=\"param-name\"></el-input>\n                <el-input v-model=\"param.value\" placeholder=\"参数值\" class=\"param-value\"></el-input>\n                <el-button type=\"danger\" icon=\"el-icon-delete\" circle @click=\"removeParam(index)\" size=\"mini\"></el-button>\n              </div>\n              <el-button type=\"primary\" icon=\"el-icon-plus\" size=\"small\" @click=\"addParam\">添加参数</el-button>\n            </div>\n          </el-form-item>\n        </template>\n        \n        <!-- 脚本任务特有字段 -->\n        <template v-if=\"taskForm.task_type === 'script'\">\n          <el-form-item label=\"脚本类型\" prop=\"script_type\">\n            <el-select v-model=\"taskForm.script_type\" placeholder=\"请选择脚本类型\" style=\"width: 100%\">\n              <el-option label=\"Python\" value=\"python\"></el-option>\n              <el-option label=\"Bash\" value=\"bash\"></el-option>\n              <el-option label=\"PowerShell\" value=\"powershell\"></el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"脚本内容\" prop=\"script_content\">\n            <el-input\n              type=\"textarea\"\n              v-model=\"taskForm.script_content\"\n              :rows=\"10\"\n              placeholder=\"请输入脚本内容\"\n            ></el-input>\n          </el-form-item>\n        </template>\n        \n        <!-- 命令任务特有字段 -->\n        <template v-if=\"taskForm.task_type === 'command'\">\n          <el-form-item label=\"命令内容\" prop=\"command\">\n            <el-input\n              type=\"textarea\"\n              v-model=\"taskForm.command\"\n              :rows=\"5\"\n              placeholder=\"请输入命令内容\"\n            ></el-input>\n          </el-form-item>\n        </template>\n        \n        <el-form-item label=\"启用状态\">\n          <el-switch v-model=\"taskForm.is_enabled\"></el-switch>\n        </el-form-item>\n      </el-form>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveTask\" :loading=\"saveLoading\">保存</el-button>\n      </span>\n    </el-dialog>\n    \n    <!-- 删除确认对话框 -->\n    <el-dialog\n      title=\"确认删除\"\n      :visible.sync=\"deleteDialogVisible\"\n      width=\"30%\">\n      <p>确定要删除任务 \"{{ taskToDelete ? taskToDelete.name : '' }}\" 吗？</p>\n      <p class=\"warning-text\">此操作将永久删除该任务及其所有执行记录，且不可恢复！</p>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"deleteDialogVisible = false\">取消</el-button>\n        <el-button type=\"danger\" @click=\"deleteTask\" :loading=\"deleteLoading\">确定删除</el-button>\n      </span>\n    </el-dialog>\n    \n    <!-- 参数编辑对话框 -->\n    <el-dialog\n      title=\"编辑任务参数\"\n      :visible.sync=\"paramsDialogVisible\"\n      width=\"750px\"\n      @close=\"cancelExecute\"\n    >\n      <div v-if=\"currentTask && currentTask.task_type === 'jenkins'\">\n        <div class=\"params-editor\">\n          <div v-for=\"(param, index) in executionParams\" :key=\"index\" class=\"param-item\">\n            <el-form :inline=\"false\" class=\"param-form\">\n              <el-form-item :label=\"param.name\">\n                <!-- 选择类型参数 -->\n                <el-select \n                  v-if=\"param.type === 'ChoiceParameterDefinition'\" \n                  v-model=\"param.value\" \n                  :placeholder=\"`选择${param.name}参数值`\"\n                  style=\"width: 100%\"\n                >\n                  <el-option \n                    v-for=\"choice in param.choices\" \n                    :key=\"choice\" \n                    :label=\"choice\" \n                    :value=\"choice\"\n                  ></el-option>\n                </el-select>\n                <!-- 布尔类型参数 -->\n                <el-switch \n                  v-else-if=\"param.type === 'BooleanParameterDefinition'\"\n                  v-model=\"param.value\"\n                  active-text=\"是\"\n                  inactive-text=\"否\"\n                ></el-switch>\n                <!-- 默认文本类型参数 -->\n                <el-input \n                  v-else\n                  v-model=\"param.value\" \n                  type=\"textarea\" \n                  :rows=\"5\"\n                  :placeholder=\"`输入${param.name}参数值`\"\n                  class=\"param-textarea\"\n                ></el-input>\n              </el-form-item>\n              <el-form-item v-if=\"param.description\" label=\"描述\">\n                <el-tooltip :content=\"param.description\" placement=\"top\">\n                  <span class=\"param-description\">{{ param.description }}</span>\n                </el-tooltip>\n              </el-form-item>\n            </el-form>\n          </div>\n          <div v-if=\"executionParams.length === 0\" class=\"no-params\">\n            <i class=\"el-icon-info\"></i>\n            <p>该任务没有定义参数</p>\n          </div>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelExecute\">取消</el-button>\n        <el-button type=\"primary\" @click=\"confirmExecute\" :loading=\"executeLoading\">确认执行</el-button>\n      </span>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'TaskManager',\n  data() {\n    return {\n      tasks: [],\n      loading: false,\n      searchQuery: '',\n      currentPage: 1,\n      pageSize: 10,\n      totalTasks: 0,\n      totalFilteredTasks: 0,\n      taskViews: [],\n      viewFilter: 'all',\n      \n      // 对话框相关\n      dialogVisible: false,\n      dialogTitle: '添加任务',\n      isEdit: false,\n      taskForm: {\n        name: '',\n        task_type: 'jenkins',\n        description: '',\n        is_enabled: true,\n        view_id: null,\n        jenkins_url: '',\n        jenkins_job_name: '',\n        jenkins_username: '',\n        jenkins_api_token: '',\n        jenkins_parameters: {},\n        script_type: '',\n        script_content: '',\n        command: ''\n      },\n      formRules: {\n        name: [\n          { required: true, message: '请输入任务名称', trigger: 'blur' },\n          { min: 2, max: 50, message: '长度在 2 到 50 个字符', trigger: 'blur' }\n        ],\n        task_type: [\n          { required: true, message: '请选择任务类型', trigger: 'change' }\n        ],\n        jenkins_url: [\n          { required: true, message: 'Jenkins URL不能为空', trigger: 'blur' }\n        ],\n        jenkins_job_name: [\n          { required: true, message: 'Jenkins任务名称不能为空', trigger: 'blur' }\n        ],\n        script_type: [\n          { required: true, message: '请选择脚本类型', trigger: 'change' }\n        ],\n        script_content: [\n          { required: true, message: '脚本内容不能为空', trigger: 'blur' }\n        ],\n        command: [\n          { required: true, message: '命令内容不能为空', trigger: 'blur' }\n        ]\n      },\n      saveLoading: false,\n      \n      // Jenkins相关\n      jenkinsJobs: [],\n      loadingJenkinsJobs: false,\n      loadingJobParameters: false,\n      \n      // 删除相关\n      deleteDialogVisible: false,\n      taskToDelete: null,\n      deleteLoading: false,\n\n      // Jenkins参数相关\n      jenkinsParams: [], // 用于UI展示的Jenkins参数数组\n      \n      // 参数对话框相关\n      paramsDialogVisible: false,\n      executionParams: [],\n      jobParameters: [],\n      currentTask: null,\n      executeLoading: false,\n\n      // 添加状态过滤\n      statusFilter: 'all',\n\n      // 任务权限\n      taskPermissions: {},\n    };\n  },\n  watch: {\n    'taskForm.jenkins_job_name': function(newVal, oldVal) {\n      if (newVal && newVal !== oldVal) {\n        this.onJenkinsJobSelected(newVal);\n      }\n    }\n  },\n  computed: {\n    filteredTasks() {\n      if (!this.searchQuery && this.statusFilter === 'all' && this.viewFilter === 'all') {\n        // 应用分页\n        const start = (this.currentPage - 1) * this.pageSize;\n        const end = start + this.pageSize;\n        return this.tasks.slice(start, end);\n      }\n      \n      let filtered = this.tasks;\n      \n      // 先按状态过滤\n      if (this.statusFilter === 'enabled') {\n        filtered = filtered.filter(task => task.is_enabled);\n      } else if (this.statusFilter === 'disabled') {\n        filtered = filtered.filter(task => !task.is_enabled);\n      }\n      \n      // 按视图过滤\n      if (this.viewFilter !== 'all') {\n        if (this.viewFilter === 'none') {\n          // 过滤没有视图的任务\n          filtered = filtered.filter(task => !task.view_id);\n        } else {\n          // 过滤特定视图的任务\n          filtered = filtered.filter(task => task.view_id === this.viewFilter);\n        }\n      }\n      \n      // 再按搜索条件过滤\n      if (this.searchQuery) {\n        const query = this.searchQuery.toLowerCase();\n        filtered = filtered.filter(task => \n          task.name.toLowerCase().includes(query) || \n          (task.description && task.description.toLowerCase().includes(query)) ||\n          this.getTaskTypeLabel(task.task_type).toLowerCase().includes(query)\n        );\n      }\n      \n      // 保存过滤后的总数量\n      this.totalFilteredTasks = filtered.length;\n      \n      // 应用分页\n      const start = (this.currentPage - 1) * this.pageSize;\n      const end = start + this.pageSize;\n      return filtered.slice(start, end);\n    },\n    \n    // 获取过滤后的总任务数\n    totalTasksCount() {\n      return this.totalFilteredTasks || this.tasks.length;\n    },\n    currentUser() {\n      return this.$store.state.user || {};\n    }\n  },\n  created() {\n    this.loadTasks();\n    this.loadTaskPermissions();\n    this.loadTaskViews();\n    \n    // 检查是否有视图ID参数\n    if (this.$route.query.view_id) {\n      this.viewFilter = parseInt(this.$route.query.view_id);\n    }\n  },\n  methods: {\n    // 加载任务列表\n    async loadTasks() {\n      this.loading = true;\n      try {\n        const response = await axios.get('/api/tasks');\n        this.tasks = response.data;\n        this.totalTasks = this.tasks.length;\n        this.loading = false;\n      } catch (error) {\n        this.$message.error('加载任务列表失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.loading = false;\n      }\n    },\n    \n    // 添加参数\n    addParam() {\n      this.jenkinsParams.push({ name: '', value: '' });\n    },\n    \n    // 移除参数\n    removeParam(index) {\n      this.jenkinsParams.splice(index, 1);\n    },\n    \n    // 将参数数组转换为对象\n    paramsToObject() {\n      const result = {};\n      this.jenkinsParams.forEach(param => {\n        if (param.name && param.name.trim()) {\n          result[param.name.trim()] = param.value;\n        }\n      });\n      return result;\n    },\n    \n    // 将参数对象转换为数组\n    paramsToArray(paramsObj) {\n      const result = [];\n      if (paramsObj && typeof paramsObj === 'object') {\n        Object.keys(paramsObj).forEach(key => {\n          result.push({\n            name: key,\n            value: paramsObj[key]\n          });\n        });\n      }\n      return result;\n    },\n    \n    // 显示添加对话框\n    showAddDialog() {\n      this.isEdit = false;\n      this.dialogTitle = '添加任务';\n      this.jenkinsParams = []; // 清空参数\n      this.dialogVisible = true;\n    },\n    \n    // 编辑任务\n    editTask(task) {\n      this.isEdit = true;\n      this.dialogTitle = '编辑任务';\n      \n      // 复制任务数据到表单\n      this.taskForm = {\n        id: task.id,\n        name: task.name,\n        task_type: task.task_type,\n        description: task.description || '',\n        is_enabled: task.is_enabled,\n        view_id: task.view_id,\n        jenkins_url: task.jenkins_url || '',\n        jenkins_job_name: task.jenkins_job_name || '',\n        jenkins_username: task.jenkins_username || '',\n        jenkins_api_token: task.jenkins_api_token || '',\n        jenkins_parameters: task.jenkins_parameters || {},\n        script_type: task.script_type || '',\n        script_content: task.script_content || '',\n        command: task.command || ''\n      };\n      \n      // 将参数对象转换为数组，用于UI展示\n      this.jenkinsParams = this.paramsToArray(task.jenkins_parameters);\n      \n      this.dialogVisible = true;\n    },\n    \n    // 保存任务\n    saveTask() {\n      this.$refs.taskForm.validate(async valid => {\n        if (!valid) return;\n        \n        // 处理Jenkins参数\n        if (this.taskForm.task_type === 'jenkins') {\n          this.taskForm.jenkins_parameters = this.paramsToObject();\n        }\n        \n        this.saveLoading = true;\n        \n        try {\n          let response;\n          \n          if (this.isEdit) {\n            // 更新任务\n            response = await axios.put(`/api/tasks/${this.taskForm.id}`, this.taskForm);\n            \n            // 更新本地数据\n            const index = this.tasks.findIndex(t => t.id === this.taskForm.id);\n            if (index !== -1) {\n              this.$set(this.tasks, index, response.data);\n            }\n            \n            this.$message.success('任务更新成功');\n          } else {\n            // 创建任务\n            response = await axios.post('/api/tasks', this.taskForm);\n            \n            // 添加到本地数据\n            this.tasks.push(response.data);\n            this.totalTasks = this.tasks.length;\n            \n            this.$message.success('任务创建成功');\n          }\n          \n          this.dialogVisible = false;\n          this.saveLoading = false;\n        } catch (error) {\n          this.$message.error('保存任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n          this.saveLoading = false;\n        }\n      });\n    },\n    \n    // 重置表单\n    resetForm() {\n      if (this.$refs.taskForm) {\n        this.$refs.taskForm.resetFields();\n      }\n      \n      this.taskForm = {\n        name: '',\n        task_type: 'jenkins',\n        description: '',\n        is_enabled: true,\n        view_id: null,\n        jenkins_url: '',\n        jenkins_job_name: '',\n        jenkins_username: '',\n        jenkins_api_token: '',\n        jenkins_parameters: {},\n        script_type: '',\n        script_content: '',\n        command: ''\n      };\n      \n      this.jenkinsParams = [];\n      this.jenkinsJobs = [];\n    },\n    \n    // 确认删除\n    confirmDelete(task) {\n      this.taskToDelete = task;\n      this.deleteDialogVisible = true;\n    },\n    \n    // 删除任务\n    async deleteTask() {\n      if (!this.taskToDelete) return;\n      \n      this.deleteLoading = true;\n      \n      try {\n        await axios.delete(`/api/tasks/${this.taskToDelete.id}`);\n        \n        // 从本地数据中移除\n        const index = this.tasks.findIndex(t => t.id === this.taskToDelete.id);\n        if (index !== -1) {\n          this.tasks.splice(index, 1);\n          this.totalTasks = this.tasks.length;\n        }\n        \n        this.$message.success('任务删除成功');\n        this.deleteDialogVisible = false;\n        this.deleteLoading = false;\n      } catch (error) {\n        this.$message.error('删除任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.deleteLoading = false;\n      }\n    },\n    \n    // 执行任务\n    async executeTask(task) {\n      this.currentTask = task;\n      \n      if (task.task_type === 'jenkins') {\n        // 获取任务参数\n        try {\n          this.executeLoading = true;\n          \n          // 获取Jenkins任务参数\n          const params = {\n            url: task.jenkins_url,\n            username: task.jenkins_username || '',\n            api_token: task.jenkins_api_token || '',\n            job_name: task.jenkins_job_name\n          };\n          \n          const response = await axios.get('/api/jenkins/job/parameters', { params });\n          \n          // 处理响应\n          if (response.data && Array.isArray(response.data)) {\n            this.jobParameters = response.data;\n            \n            // 准备执行参数，使用任务默认参数\n            this.executionParams = [];\n            const defaultParams = task.jenkins_parameters || {};\n            \n            // 将任务参数与默认值合并\n            response.data.forEach(param => {\n              this.executionParams.push({\n                name: param.name,\n                value: defaultParams[param.name] || param.default_value || '',\n                description: param.description || '',\n                type: param.type || 'string',\n                choices: param.choices || [] // 添加选项数组\n              });\n            });\n            \n            // 显示参数对话框\n            this.paramsDialogVisible = true;\n            this.executeLoading = false; // 重要：在显示对话框时重置loading状态\n          } else {\n            // 没有参数，直接执行\n            this.confirmExecute();\n          }\n        } catch (error) {\n          console.error('获取任务参数失败:', error);\n          this.$message.error('获取任务参数失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n          this.executeLoading = false;\n        }\n      } else {\n        // 非Jenkins任务，直接执行\n        this.confirmExecute();\n      }\n    },\n    \n    // 取消执行\n    cancelExecute() {\n      this.paramsDialogVisible = false;\n      this.executeLoading = false;\n      this.executionParams = [];\n      this.currentTask = null;\n    },\n    \n    // 确认执行\n    async confirmExecute() {\n      if (!this.currentTask) return;\n      \n      try {\n        this.executeLoading = true;\n        \n        // 构建参数\n        const parameters = {};\n        if (this.executionParams.length > 0) {\n          this.executionParams.forEach(param => {\n            parameters[param.name] = param.value;\n          });\n        }\n        \n        // 发送执行请求\n        const response = await axios.post(`/api/tasks/${this.currentTask.id}/execute`, \n          { parameters: Object.keys(parameters).length > 0 ? parameters : undefined }, \n          {\n            headers: {\n              'Content-Type': 'application/json'\n            }\n          }\n        );\n        \n        this.$message.success('任务已提交执行');\n        \n        // 关闭对话框\n        this.paramsDialogVisible = false;\n        \n        // 跳转到执行详情页\n        this.$router.push(`/system/task-execution/${response.data.execution_id}`);\n      } catch (error) {\n        this.$message.error('执行任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      } finally {\n        this.executeLoading = false;\n        this.currentTask = null;\n      }\n    },\n    \n    // 加载Jenkins任务\n    async loadJenkinsJobs() {\n      if (!this.taskForm.jenkins_url) {\n        this.$message.warning('请先输入Jenkins URL');\n        return;\n      }\n      \n      try {\n        this.loadingJenkinsJobs = true;\n        \n        // 构建请求参数\n        const params = {\n          url: this.taskForm.jenkins_url,\n          username: this.taskForm.jenkins_username || '',\n          api_token: this.taskForm.jenkins_api_token || ''\n        };\n        \n        // 发送请求\n        const response = await axios.get('/api/jenkins/jobs', { params });\n        \n        // 处理响应\n        if (response.data && Array.isArray(response.data)) {\n          this.jenkinsJobs = response.data.map(job => ({\n            name: job.name,\n            url: job.url,\n            folder: job.folder // 添加folder属性\n          }));\n          \n          if (this.jenkinsJobs.length === 0) {\n            this.$message.warning('未找到任何Jenkins任务');\n          }\n        } else {\n          this.$message.warning('获取Jenkins任务列表格式不正确');\n          this.jenkinsJobs = [];\n        }\n      } catch (error) {\n        console.error('加载Jenkins任务失败:', error);\n        this.$message.error('加载Jenkins任务失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n        this.jenkinsJobs = [];\n      } finally {\n        this.loadingJenkinsJobs = false;\n      }\n    },\n    \n    // 当选择Jenkins任务后加载任务参数\n    async onJenkinsJobSelected(jobName) {\n      if (!jobName) return;\n      \n      try {\n        this.loadingJobParameters = true;\n        \n        // 构建请求参数\n        const params = {\n          url: this.taskForm.jenkins_url,\n          username: this.taskForm.jenkins_username || '',\n          api_token: this.taskForm.jenkins_api_token || '',\n          job_name: jobName\n        };\n        \n        // 发送请求\n        const response = await axios.get('/api/jenkins/job/parameters', { params });\n        \n        // 处理响应\n        if (response.data && Array.isArray(response.data)) {\n          // 清空现有参数\n          this.jenkinsParams = [];\n          \n          // 如果有参数，添加到参数列表\n          if (response.data.length > 0) {\n            response.data.forEach(param => {\n              this.jenkinsParams.push({\n                name: param.name,\n                value: param.default_value || ''\n              });\n            });\n            \n            this.$message.success(`成功获取到 ${response.data.length} 个任务参数`);\n          }\n        }\n      } catch (error) {\n        console.error('加载Jenkins任务参数失败:', error);\n        this.$message.error('加载任务参数失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      } finally {\n        this.loadingJobParameters = false;\n      }\n    },\n    \n    // 处理任务状态变更\n    async handleStatusChange(task) {\n      try {\n        await axios.put(`/api/tasks/${task.id}`, {\n          is_enabled: task.is_enabled\n        });\n        \n        this.$message.success(`任务已${task.is_enabled ? '启用' : '禁用'}`);\n      } catch (error) {\n        // 恢复原状态\n        task.is_enabled = !task.is_enabled;\n        this.$message.error('更新任务状态失败: ' + (error.response && error.response.data && error.response.data.error || error.message));\n      }\n    },\n    \n    // 分页相关方法\n    handleSizeChange(val) {\n      this.pageSize = val;\n      // 重置为第一页\n      this.currentPage = 1;\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val;\n    },\n    \n    // 格式化日期\n    formatDate(dateString) {\n      if (!dateString) return '';\n      \n      // 创建日期对象\n      const date = new Date(dateString);\n      \n      // 获取UTC时间并添加8小时（东八区）\n      const utcTime = date.getTime();\n      const beijingTime = new Date(utcTime + 8 * 60 * 60 * 1000);\n      \n      // 格式化为本地时间字符串\n      return beijingTime.toLocaleString('zh-CN', {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        hour: '2-digit',\n        minute: '2-digit',\n        second: '2-digit',\n        hour12: false\n      });\n    },\n    \n    // 获取任务类型标签\n    getTaskTypeLabel(type) {\n      const types = {\n        'jenkins': 'Jenkins任务',\n        'script': '脚本任务',\n        'command': '命令任务'\n      };\n      return types[type] || type;\n    },\n    \n    // 获取任务类型标签样式\n    getTaskTypeTag(type) {\n      const types = {\n        'jenkins': 'primary',\n        'script': 'success',\n        'command': 'warning'\n      };\n      return types[type] || '';\n    },\n    \n    // 加载任务权限\n    async loadTaskPermissions() {\n      try {\n        const response = await axios.get('/api/tasks/permissions');\n        \n        // 将权限数据转换为以任务ID为键的对象\n        const permissions = {};\n        if (response.data && Array.isArray(response.data)) {\n          response.data.forEach(perm => {\n            permissions[perm.task_id] = {\n              can_view: perm.can_view,\n              can_execute: perm.can_execute,\n              can_terminate: perm.can_terminate,\n              can_delete: perm.can_delete\n            };\n          });\n        }\n        \n        this.taskPermissions = permissions;\n      } catch (error) {\n        console.error('加载任务权限失败:', error);\n      }\n    },\n    \n    // 加载任务视图\n    async loadTaskViews() {\n      try {\n        const response = await axios.get('/api/task-views');\n        this.taskViews = response.data;\n      } catch (error) {\n        console.error('加载任务视图失败:', error);\n        this.$message.error('加载任务视图失败');\n      }\n    },\n    \n    // 根据视图ID获取视图名称\n    getViewName(viewId) {\n      const view = this.taskViews.find(v => v.id === viewId);\n      return view ? view.name : '未知视图';\n    },\n    \n    // 判断是否可以查看任务\n    canView(task) {\n      // 管理员或任务创建者可以查看\n      if (this.currentUser.is_admin || task.user_id === this.currentUser.id) {\n        return true;\n      }\n      \n      // 检查是否有查看权限\n      const perm = this.taskPermissions[task.id];\n      return perm && perm.can_view;\n    },\n    \n    // 判断是否可以编辑任务\n    canEdit(task) {\n      // 只有管理员或任务创建者可以编辑\n      return this.currentUser.is_admin || task.user_id === this.currentUser.id;\n    },\n    \n    // 判断是否可以执行任务\n    canExecute(task) {\n      // 管理员或任务创建者可以执行\n      if (this.currentUser.is_admin || task.user_id === this.currentUser.id) {\n        return true;\n      }\n      \n      // 检查是否有执行权限\n      const perm = this.taskPermissions[task.id];\n      return perm && perm.can_execute;\n    },\n    \n    // 判断是否可以删除任务\n    canDelete(task) {\n      // 管理员可以删除任何任务\n      if (this.currentUser.is_admin) {\n        return true;\n      }\n      \n      // 任务创建者可以删除自己的任务\n      if (task.user_id === this.currentUser.id) {\n        return true;\n      }\n      \n      // 检查是否有删除权限\n      const perm = this.taskPermissions[task.id];\n      return perm && perm.can_delete;\n    },\n    \n    // 表格行样式\n    tableRowClassName({ row, rowIndex }) {\n      if (row.is_enabled) {\n        return 'enabled-row';\n      } else {\n        return 'disabled-row';\n      }\n    },\n\n    // 处理过滤器变化\n    handleFilterChange() {\n      // 重置为第一页\n      this.currentPage = 1;\n      console.log('过滤条件变更');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.task-manager {\n  padding: 20px;\n}\n\n.page-header {\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-left {\n  flex: 1;\n  margin-right: 20px;\n}\n\n.header-right {\n  flex-shrink: 0;\n}\n\n.page-title {\n  font-size: 24px;\n  margin-bottom: 8px;\n}\n\n.page-description {\n  color: #606266;\n  font-size: 14px;\n}\n\n.actions-toolbar {\n  margin-bottom: 20px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.toolbar-left {\n  flex: 1;\n  margin-right: 20px;\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.toolbar-right {\n  flex-shrink: 0;\n}\n\n.search-input {\n  width: 300px;\n}\n\n.view-filter {\n  width: 150px;\n  margin-left: 15px;\n}\n\n.manage-views-btn {\n  margin-left: 5px;\n  font-size: 13px;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  display: flex;\n  justify-content: flex-end;\n  padding: 10px 0;\n  background-color: #f5f7fa;\n  border-radius: 4px;\n}\n\n.task-name-link {\n  color: #409EFF;\n  text-decoration: none;\n  font-weight: bold;\n}\n\n.task-name-link:hover {\n  text-decoration: underline;\n}\n\n.description-text {\n  color: #606266;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.warning-text {\n  color: #F56C6C;\n  font-weight: bold;\n}\n\n.jenkins-params {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin-top: 10px;\n}\n\n.param-item {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n}\n\n.param-name, .param-value {\n  width: 150px; /* Adjust as needed */\n}\n\n.params-editor {\n  max-height: 400px;\n  overflow-y: auto;\n}\n\n.param-item {\n  margin-bottom: 10px;\n  padding: 10px;\n  border-bottom: 1px solid #eee;\n}\n\n.param-item:last-child {\n  border-bottom: none;\n}\n\n.param-form {\n  display: flex;\n  align-items: center;\n}\n\n.param-form .el-form-item {\n  margin-bottom: 0;\n}\n\n.no-params {\n  text-align: center;\n  padding: 20px;\n  color: #909399;\n}\n\n.no-params i {\n  font-size: 30px;\n  margin-bottom: 10px;\n}\n\n.param-description {\n  color: #606266;\n  font-size: 13px;\n  line-height: 1.4;\n  display: block;\n  word-break: break-word;\n}\n\n.param-textarea {\n  width: 100%;\n  font-family: Consolas, Monaco, monospace;\n  font-size: 14px;\n  line-height: 1.5;\n}\n\n.param-textarea >>> .el-textarea__inner {\n  border-radius: 4px;\n  border-color: #dcdfe6;\n  padding: 10px;\n  min-height: 120px !important;\n  width: 500px !important;\n  transition: border-color 0.2s ease;\n}\n\n.param-textarea >>> .el-textarea__inner:focus {\n  border-color: #409EFF;\n}\n\n.param-textarea >>> .el-textarea__inner:hover {\n  border-color: #c0c4cc;\n}\n\n/* 新增样式 */\n.nested-job {\n  display: flex;\n  align-items: center;\n  font-size: 14px;\n  color: #606266;\n}\n\n.folder-name {\n  margin-right: 5px;\n}\n\n.folder-separator {\n  margin: 0 5px;\n  font-size: 12px;\n}\n\n.job-name {\n  font-weight: bold;\n  color: #303133;\n}\n\n.action-buttons {\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  flex-wrap: nowrap;\n  gap: 8px;\n}\n\n.action-buttons .el-button {\n  margin: 0;\n  padding: 7px;\n}\n\n.action-buttons .el-button + .el-button {\n  margin-left: 0;\n}\n\n/* 新增行样式 */\n.el-table .enabled-row {\n  background-color: #f5fbf8; /* 更柔和的浅绿色背景 */\n}\n\n.el-table .disabled-row {\n  background-color: #fbf5f5; /* 更柔和的浅红色背景 */\n}\n\n/* 鼠标悬停效果 */\n.el-table .el-table__row:hover {\n  background-color: #eef5ff !important;\n  transition: background-color 0.3s;\n}\n\n/* 表格样式 */\n.el-table {\n  margin-top: 15px;\n  border-radius: 4px;\n  overflow: hidden;\n  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.05);\n}\n\n.el-table >>> th {\n  background-color: #f5f7fa !important;\n  color: #606266;\n  font-weight: bold;\n  font-size: 14px;\n  padding: 12px 0;\n}\n\n.el-table >>> .el-table__header-wrapper {\n  border-bottom: 1px solid #EBEEF5;\n}\n\n.no-data-text {\n  color: #909399;\n  font-size: 13px;\n  font-style: italic;\n}\n</style> "]}]}